

<!doctype html>
<html>

<head>
  <title>Upload</title>
  <meta charset="utf-8" />
  <meta name="description" content="Fusion Dev" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="./statics/TB1LG1yhMoQMeJjy0FoXXcShVXa-32-33.png" sizes="32x32">
  <link rel="stylesheet" href="./statics/style-demo.css"> 
<link rel="stylesheet" href="./statics/next.min.css"></link>

  <script src="./statics/react-16-2-0-react-development-js,react-16-2-0-react-dom-development-js,jquery-1-11-3-jquery-min.js"></script>
  <script src="./statics/prop-types.min.js"></script>
  <script src="./statics/moment-with-locales.min.js"></script>
</head>

<body><script>
with(document)with(body)with(insertBefore(createElement("script"),firstChild))setAttribute("exparams","category=&userid=&aplus&yunid=&&trid=0be21d0415249006517296576e8c0b&asid=AQAAAAAsI+Ra33J1FAAAAAAhSIr+4jcGMQ==",id="tb-beacon-aplus",src=(location>"https"?"//g":"//g")+".alicdn.com/alilog/mlog/aplus_v2.js")
</script>

  
<script src="./statics/common-js,next.js"></script>
<script src="./statics/next-with-locales.min.js"></script>
<script>
  window.react = window.React;
  window['react-dom'] = window.ReactDOM;
  window['prop-types'] = window.PropTypes;
  window['@alife/next'] = window.Next;
  window.ConfigProvider = window.Next.ConfigProvider;
  window.customIcons = [];

  
  (function () {
    ConfigProvider.initLocales(window.Next.locales);
    var fusionLocale = 'zh_CN';
    ConfigProvider.setLanguage(fusionLocale === 'en_US' ? 'en-us' : 'zh-cn');
  })();
  
</script>

<div class="demo-wrapper pc">
  <div class="demo-index">
    <ul class="demo-index-list">
      
      <li class="demo-index-item">
        <a href="#demo-guide">开发指南</a>
      </li>
      <li class="demo-index-item">
        <a href="#demo-list">组件示例</a>
      </li>
       
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-0">文件上传</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-11">文字列表</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-6">图片列表</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-1">卡片</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-3">自定义上传参数</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-4">拖拽上传</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-9">粘贴上传</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-10">提交上传</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-7">个数限制</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-8">大小限制</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-12">内容回填</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-5">额外内容</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#upload-2">裁剪上传</a>
      </li>
       
      <li class="demo-index-item">
        <a href="#demo-api">API</a>
      </li>
      
    </ul>
  </div>

  
  <div class="demo-header">
    <div class="title">
       上传组件  Upload
    </div>
  </div>
  <div class="demo-guide markdown" id="demo-guide"><h2 id="开发指南">开发指南<a href="#开发指南" class="anchor">#</a></h2><h3 id="何时使用">何时使用<a href="#何时使用" class="anchor">#</a></h3><p>用户根据提示将自己本地的相应信息(包含本地和云储存)上传到网站，上传组件可以帮助用户对上传过程和上传结果有预期，并可以更改或撤销上传行为。</p>
<h2 id="api">API<a href="#api" class="anchor">#</a></h2><h3 id="upload">Upload<a href="#upload" class="anchor">#</a></h3><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>上传的地址</td>
<td>String</td>
<td>-</td>
</tr>
<tr>
<td>shape</td>
<td>上传按钮形状<br><br><strong>可选值</strong>:<br>&#39;card&#39;</td>
<td>Enum</td>
<td>-</td>
</tr>
<tr>
<td>accept</td>
<td>接受上传的文件类型 (image/png, image/jpg, .doc, .ppt) 详见 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/Input#attr-accept" target="_blank">input accept attribute</a></td>
<td>String</td>
<td>-</td>
</tr>
<tr>
<td>data</td>
<td>上传额外传参</td>
<td>Object/Function</td>
<td>-</td>
</tr>
<tr>
<td>headers</td>
<td>设置上传的请求头部</td>
<td>Object</td>
<td>-</td>
</tr>
<tr>
<td>withCredentials</td>
<td>是否允许请求携带 cookie</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>onProgress</td>
<td>上传中<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
<tr>
<td>onSuccess</td>
<td>可选参数，上传成功回调函数，参数为请求下响应信息以及文件<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
<tr>
<td>onError</td>
<td>可选参数，上传失败回调函数，参数为上传失败的信息、响应信息以及文件<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
<tr>
<td>children</td>
<td>子元素</td>
<td>ReactNode</td>
<td>-</td>
</tr>
<tr>
<td>timeout</td>
<td>设置上传超时,单位ms</td>
<td>Number</td>
<td>-</td>
</tr>
<tr>
<td>method</td>
<td>上传方法<br><br><strong>可选值</strong>:<br>&#39;post&#39;, &#39;put&#39;</td>
<td>Enum</td>
<td>&#39;post&#39;</td>
</tr>
<tr>
<td>onSelect</td>
<td>选择文件回调<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
<tr>
<td>onDrop</td>
<td>放文件<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
<tr>
<td>value</td>
<td>文件列表</td>
<td>Array</td>
<td>-</td>
</tr>
<tr>
<td>defaultValue</td>
<td>默认文件列表</td>
<td>Array</td>
<td>-</td>
</tr>
<tr>
<td>listType</td>
<td>上传列表的样式<br><br><strong>可选值</strong>:<br>&#39;text&#39;(文字)<br>&#39;image&#39;(图文)<br>&#39;card&#39;(卡片)</td>
<td>Enum</td>
<td>-</td>
</tr>
<tr>
<td>formatter</td>
<td>数据格式化函数，配合自定义 action 使用，参数为服务器的响应数据，详见 <a href="#formater" target="_blank">formatter</a><br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>-</td>
</tr>
<tr>
<td>limit</td>
<td>最大文件上传个数</td>
<td>Number</td>
<td>Infinity</td>
</tr>
<tr>
<td>dragable</td>
<td>可选参数，是否支持拖拽上传，<code>ie10+</code> 支持。</td>
<td>Boolean</td>
<td>-</td>
</tr>
<tr>
<td>disabled</td>
<td>可选参数，是否禁用上传功能</td>
<td>Boolean</td>
<td>-</td>
</tr>
<tr>
<td>onChange</td>
<td>上传文件改变时的状态<br><br><strong>签名</strong>:<br>Function(info: Object) =&gt; void<br><strong>参数</strong>:<br><em>info</em>: {Object} 文件事件对象</td>
<td>Function</td>
<td>func.noop</td>
</tr>
<tr>
<td>onRemove</td>
<td>移除文件回调函数，详见 <a href="#onRemove" target="_blank">onRemove</a><br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
</tbody>
</table>
<h3 id="upload-card">Upload.Card<a href="#upload-card" class="anchor">#</a></h3><blockquote>
<p>继承 Upload 的 API，除非特别说明</p>
</blockquote>
<h3 id="upload-drager">Upload.Drager<a href="#upload-drager" class="anchor">#</a></h3><blockquote>
<p>IE10+ 支持。继承 Upload 的 API，除非特别说明</p>
</blockquote>
<h3 id="upload-selecter">Upload.Selecter<a href="#upload-selecter" class="anchor">#</a></h3><blockquote>
<p>[底层能力] 可自定义样式的文件选择器</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>disabled</td>
<td>是否禁用上传功能</td>
<td>Boolean</td>
<td>-</td>
</tr>
<tr>
<td>multiple</td>
<td>是否支持多选文件，<code>ie10+</code> 支持。开启后按住 ctrl 可选择多个文件</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>dragable</td>
<td>是否支持拖拽上传，<code>ie10+</code> 支持。</td>
<td>Boolean</td>
<td>-</td>
</tr>
<tr>
<td>accept</td>
<td>接受上传的文件类型 (image/png, image/jpg, .doc, .ppt) 详见 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/Input#attr-accept" target="_blank">input accept attribute</a></td>
<td>String</td>
<td>-</td>
</tr>
<tr>
<td>onSelect</td>
<td>文件选择回调<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
<tr>
<td>onDragOver</td>
<td>拖拽经过回调<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
<tr>
<td>onDragLeave</td>
<td>拖拽离开回调<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
<tr>
<td>onDrop</td>
<td>拖拽完成回调<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>func.noop</td>
</tr>
</tbody>
</table>
<h2 id="method">Method<a href="#method" class="anchor">#</a></h2><h3 id="upload-uploader">Upload.Uploader<a href="#upload-uploader" class="anchor">#</a></h3><blockquote>
<p>[底层能力] 文件上传核心功能
let uploader = new Upload.Uploader([options]);</p>
</blockquote>
<h4 id="options">options<a href="#options" class="anchor">#</a></h4><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>上传的地址</td>
<td>String</td>
<td>-</td>
</tr>
<tr>
<td>data</td>
<td>上传额外传参</td>
<td>Object/Function</td>
<td>-</td>
</tr>
<tr>
<td>headers</td>
<td>设置上传的请求头部</td>
<td>Object</td>
<td>-</td>
</tr>
<tr>
<td>withCredentials</td>
<td>是否允许请求携带 cookie</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>onProgress</td>
<td>上传中<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>noop</td>
</tr>
<tr>
<td>onSuccess</td>
<td>上传成功回调函数，参数为请求下响应信息以及文件<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>noop</td>
</tr>
<tr>
<td>onError</td>
<td>可选参数，上传失败回调函数，参数为上传失败的信息、响应信息以及文件<br><br><strong>签名</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>noop</td>
</tr>
</tbody>
</table>
<h3 id="onchange-返回结构">onChange 返回结构<a href="#onchange-返回结构" class="anchor">#</a></h3><pre>    {
      uid: &#39;uid&#39;,       // 文件唯一标识
      name: &#39;xx.png&#39;    // 文件名
      state: &#39;done&#39;,    // 状态有：selected uploading done error
      response: {&quot;success&quot;:true}  // 服务端响应内容
      url: &#39;https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg&#39;,
      imgURL: &#39;https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg&#39;, // 头像(可选)
      downloadURL: &#39;https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg&#39;   // 下载(可选)
    }

</pre><h3 id="接口-response-返回数据格式要求">接口 response 返回数据格式要求<a href="#接口-response-返回数据格式要求" class="anchor">#</a></h3><pre>    {
      &quot;success&quot;: true,
      &quot;message&quot;: &quot;上传成功&quot;,                                  // success=false 时候可以展示错误
      &quot;url&quot;: &quot;http://kfupload.alibaba.com/a.png&quot;             // 返回结果
      &quot;imgURL&quot;: &quot;http://kfupload.alibaba.com/a.png&quot;,         // 图片预览地址 (非必须)
      &quot;downloadURL&quot;: &quot;http://kfupload.alibaba.com/a.png&quot;,    // 文件下载地址 (非必须)
    }

</pre><h3 id="后端数据格式化">后端数据格式化<a href="#后端数据格式化" class="anchor">#</a></h3><p>通过 <code>formatter</code> 将来自后端的不规则数据转换为符合组件要求的数据格式</p>
<ul>
<li><code>假设</code> 服务器的响应数据如下</li>
</ul>
<pre>    {
      &quot;status&quot;: &quot;success&quot;,                              // 上传成功返回码
      &quot;img_src&quot;: &quot;http://kfupload.alibaba.com/a.jpg&quot;,   // 图片链接
    }

</pre><ul>
<li>转换方法</li>
</ul>
<pre>    &lt;Upload
      action=&quot;http://127.0.0.1:3001/upload&quot;
      formatter={(res) =&gt; {
        // 函数里面根据当前服务器返回的响应数据
        // 重新拼装符合组件要求的数据格式
        return {
          success: res.status === &#39;success&#39;,
          url: res.img_src,
        }
      }}
    /&gt;

</pre><h2 id="ie9兼容性">IE9兼容性<a href="#ie9兼容性" class="anchor">#</a></h2><ul>
<li>ie9 下用因为使用 iframe 作为无刷新上传方案，必须保证表单页面的域名和上传的服务器端的域名相同。</li>
<li>ie9 下服务器端返回数据需要设置头部 <code>context-type</code> 为 <code>text/html</code>，不要设置为 <code>application/json</code></li>
<li>如果只是一级域名相同（<code>taobao.com</code> 为一级域名  <code>shop.taobao.com</code> 为二级域名），可以通过降域的方式实现跨域上传。</li>
</ul>
<p>假设你表单页面的域是：shop.taobao.com，而上传的服务器端路径却是 upload.taobao.com。服务端返回必须带额外script标签</p>
<pre>    &lt;script&gt;document.domain=&quot;taobao.com&quot;;&lt;/script&gt;
    {&quot;status&quot;:1,&quot;type&quot;:&quot;ajax&quot;,&quot;name&quot;:&quot;54.png&quot;,&quot;url&quot;:&quot;.\/files\/54.png&quot;}

</pre><p>iframe上传会额外传递参数 <code>_documentDomain</code> 方便你设置域名</p>
</div>
  

  <div class="demo-list" id="demo-list">
    
    <div class="demo-list-item" id="upload-0">
      <div class="demo-list-item-header">
        <a href="#upload-0" class="title">文件上传</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-0"></div>
          <script>var mountNode = document.getElementById('react-app-upload-0');</script> <script>(function(){'use strict';

var _next = require('@alife/next');

ReactDOM.render(React.createElement(
    'div',
    null,
    React.createElement(
        _next.Upload,
        {
            action: '//upload-server.alibaba.net/upload.do',
            beforeUpload: beforeUpload,
            onChange: onChange,
            onSuccess: onSuccess,
            multiple: true,
            defaultValue: [{
                name: 'IMG.png',
                state: 'done',
                size: 1024,
                downloadURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
                fileURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
                imgURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
            }]
        },
        React.createElement(
            _next.Button,
            { type: 'primary', style: { margin: '0 0 10px' } },
            'Upload File'
        )
    ),
    React.createElement('br', null),
    React.createElement(
        _next.Upload,
        { shape: 'card', style: { display: 'inline-block' } },
        'Upload File'
    ),
    React.createElement(
        _next.Upload,
        { style: { display: 'inline', marginLeft: '5px' } },
        React.createElement(
            'div',
            { className: 'next-upload-card' },
            React.createElement(_next.Icon, { type: 'attachment', size: 'large' }),
            React.createElement(
                'div',
                { className: 'next-upload-text' },
                'Attachment'
            )
        )
    )
), mountNode);

function beforeUpload(info) {
    console.log('beforeUpload : ', info);
}

function onChange(info) {
    console.log('onChange : ', info);
}

function onSuccess(info) {
    console.log('onSuccess : ', info);
}})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Button, Icon } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
        <span class="hljs-attr">beforeUpload</span>=<span class="hljs-string">{beforeUpload}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
        <span class="hljs-attr">onSuccess</span>=<span class="hljs-string">{onSuccess}</span>
        <span class="hljs-attr">multiple</span>
        <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{[{</span>
            <span class="hljs-attr">name:</span> '<span class="hljs-attr">IMG.png</span>',
            <span class="hljs-attr">state:</span> '<span class="hljs-attr">done</span>',
            <span class="hljs-attr">size:</span> <span class="hljs-attr">1024</span>,
            <span class="hljs-attr">downloadURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">fileURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">imgURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>'
        }]}
    &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">10px</span>'}}&gt;</span>Upload File<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Upload</span> <span class="hljs-attr">shape</span>=<span class="hljs-string">"card"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{display:</span> '<span class="hljs-attr">inline-block</span>'}}&gt;</span>
        Upload File
    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Upload</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{display:</span> '<span class="hljs-attr">inline</span>', <span class="hljs-attr">marginLeft:</span> '<span class="hljs-attr">5px</span>'}}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"next-upload-card"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"attachment"</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"large"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"next-upload-text"</span>&gt;</span>
                Attachment
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>, mountNode);

function beforeUpload(info) {
    console.log('beforeUpload : ', info);
}

function onChange(info) {
    console.log('onChange : ', info);
}

function onSuccess(info) {
    console.log('onSuccess : ', info);
}</span></code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-11">
      <div class="demo-list-item-header">
        <a href="#upload-11" class="title">文字列表</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-11"></div>
          <script>var mountNode = document.getElementById('react-app-upload-11');</script> <script>(function(){'use strict';

var _next = require('@alife/next');

var defaultValue = [{
    name: 'IMG.png',
    state: 'done',
    size: 1024,
    downloadURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
    fileURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
    url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
}];

ReactDOM.render(React.createElement(
    _next.Upload,
    {
        action: '//upload-server.alibaba.net/upload.do',
        beforeUpload: beforeUpload,
        onChange: onChange,
        onSuccess: onSuccess,
        listType: 'text',
        defaultValue: defaultValue
    },
    React.createElement(
        _next.Button,
        { type: 'primary', style: { margin: '0 0 10px' } },
        'Upload File'
    )
), mountNode);

function beforeUpload(info) {
    console.log('beforeUpload : ', info);
}

function onChange(info) {
    console.log('onChange : ', info);
}

function onSuccess(info) {
    console.log('onSuccess : ', info);
}})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> defaultValue = [{
    <span class="hljs-attr">name</span>: <span class="hljs-string">'IMG.png'</span>,
    <span class="hljs-attr">state</span>: <span class="hljs-string">'done'</span>,
    <span class="hljs-attr">size</span>: <span class="hljs-number">1024</span>,
    <span class="hljs-attr">downloadURL</span>: <span class="hljs-string">'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'</span>,
    <span class="hljs-attr">fileURL</span>: <span class="hljs-string">'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'</span>
}];

ReactDOM.render((
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
        <span class="hljs-attr">beforeUpload</span>=<span class="hljs-string">{beforeUpload}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
        <span class="hljs-attr">onSuccess</span>=<span class="hljs-string">{onSuccess}</span>
        <span class="hljs-attr">listType</span>=<span class="hljs-string">"text"</span>
        <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{defaultValue}</span>
    &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">10px</span>'}}&gt;</span>Upload File<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span></span>
), mountNode);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beforeUpload</span>(<span class="hljs-params">info</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'beforeUpload : '</span>, info);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onChange</span>(<span class="hljs-params">info</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onChange : '</span>, info);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onSuccess</span>(<span class="hljs-params">info</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onSuccess : '</span>, info);
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-6">
      <div class="demo-list-item-header">
        <a href="#upload-6" class="title">图片列表</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-6"></div>
          <script>var mountNode = document.getElementById('react-app-upload-6');</script> <script>(function(){"use strict";

var _next = require("@alife/next");

ReactDOM.render(React.createElement(
    _next.Upload,
    {
        listType: "image",
        action: "//upload-server.alibaba.net/upload.do",
        accept: "image/png, image/jpg, image/jpeg, image/gif, image/bmp",
        beforeUpload: beforeUpload,
        onChange: onChange,
        defaultValue: [{
            name: 'IMG.png',
            state: 'done',
            size: 100,
            url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
        }]
    },
    React.createElement(
        _next.Button,
        { type: "primary", style: { margin: '0 0 10px' } },
        "Upload File"
    )
), mountNode);

function beforeUpload(info) {
    console.log('beforeUpload callback : ', info);
}

function onChange(info) {
    console.log('onChange callback : ', info);
}})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

ReactDOM.render((
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
        <span class="hljs-attr">listType</span>=<span class="hljs-string">"image"</span>
        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
        <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/png, image/jpg, image/jpeg, image/gif, image/bmp"</span>
        <span class="hljs-attr">beforeUpload</span>=<span class="hljs-string">{beforeUpload}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
        <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{[{</span>
            <span class="hljs-attr">name:</span> '<span class="hljs-attr">IMG.png</span>',
            <span class="hljs-attr">state:</span> '<span class="hljs-attr">done</span>',
            <span class="hljs-attr">size:</span> <span class="hljs-attr">100</span>,
            <span class="hljs-attr">url:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
        }]}
    &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">10px</span>'}}&gt;</span>Upload File<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span></span>
), mountNode);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beforeUpload</span>(<span class="hljs-params">info</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'beforeUpload callback : '</span>, info);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onChange</span>(<span class="hljs-params">info</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onChange callback : '</span>, info);
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-1">
      <div class="demo-list-item-header">
        <a href="#upload-1" class="title">卡片</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-1"></div>
          <script>var mountNode = document.getElementById('react-app-upload-1');</script> <script>(function(){"use strict";

var _next = require("@alife/next");

ReactDOM.render(React.createElement(_next.Upload.Card, {
    listType: "card",
    action: "//upload-server.alibaba.net/upload.do",
    accept: "image/png, image/jpg, image/jpeg, image/gif, image/bmp",
    onPreview: onPreview,
    onChange: onChange,
    onSuccess: onSuccess,
    onError: onError,
    defaultValue: [{
        uid: '0',
        name: 'IMG.png',
        state: 'done',
        url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
        downloadURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
        imgURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
    }, {
        uid: '1',
        name: 'IMG.png',
        percent: 50,
        state: 'uploading',
        url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
        downloadURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
        imgURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
    }, {
        uid: '2',
        name: 'IMG.png',
        state: 'error',
        url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
        downloadURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
        imgURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
    }]
}), mountNode);

function onPreview(info) {
    console.log('onPreview callback : ', info);
}

function onChange(info) {
    console.log('onChange callback : ', info);
}

function onSuccess(res, file) {
    console.log('onSuccess callback : ', res, file);
}

function onError(file) {
    console.log('onError callback : ', file);
}})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

ReactDOM.render((
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Upload.Card</span>
        <span class="hljs-attr">listType</span>=<span class="hljs-string">"card"</span>
        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
        <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/png, image/jpg, image/jpeg, image/gif, image/bmp"</span>
        <span class="hljs-attr">onPreview</span>=<span class="hljs-string">{onPreview}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
        <span class="hljs-attr">onSuccess</span>=<span class="hljs-string">{onSuccess}</span>
        <span class="hljs-attr">onError</span>=<span class="hljs-string">{onError}</span>
        <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{[{</span>
            <span class="hljs-attr">uid:</span> '<span class="hljs-attr">0</span>',
            <span class="hljs-attr">name:</span> '<span class="hljs-attr">IMG.png</span>',
            <span class="hljs-attr">state:</span> '<span class="hljs-attr">done</span>',
            <span class="hljs-attr">url:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">downloadURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">imgURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>'
        }, {
            <span class="hljs-attr">uid:</span> '<span class="hljs-attr">1</span>',
            <span class="hljs-attr">name:</span> '<span class="hljs-attr">IMG.png</span>',
            <span class="hljs-attr">percent:</span> <span class="hljs-attr">50</span>,
            <span class="hljs-attr">state:</span> '<span class="hljs-attr">uploading</span>',
            <span class="hljs-attr">url:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">downloadURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">imgURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>'
        }, {
            <span class="hljs-attr">uid:</span> '<span class="hljs-attr">2</span>',
            <span class="hljs-attr">name:</span> '<span class="hljs-attr">IMG.png</span>',
            <span class="hljs-attr">state:</span> '<span class="hljs-attr">error</span>',
            <span class="hljs-attr">url:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">downloadURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">imgURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>'
        }]}
    /&gt;</span>
), mountNode);

function onPreview(info) {
    console.log('onPreview callback : ', info);
}

function onChange(info) {
    console.log('onChange callback : ', info);
}

function onSuccess(res, file) {
    console.log('onSuccess callback : ', res, file);
}

function onError(file) {
    console.log('onError callback : ', file);
}</span></code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-3">
      <div class="demo-list-item-header">
        <a href="#upload-3" class="title">自定义上传参数</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-3"></div>
          <script>var mountNode = document.getElementById('react-app-upload-3');</script> <script>(function(){"use strict";

var _next = require("@alife/next");

ReactDOM.render(React.createElement(
    _next.Upload,
    {
        listType: "text",
        action: "//upload-server.alibaba.net/upload.do",
        accept: "image/png, image/jpg, image/jpeg, image/gif, image/bmp",
        data: { token: 'abcd' },
        beforeUpload: beforeUpload,
        onChange: onChange,
        defaultValue: [{
            name: 'IMG.png',
            state: 'done',
            size: 1024,
            downloadURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
            imgURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
        }]
    },
    React.createElement(
        _next.Button,
        { type: "primary", style: { margin: '0 0 10px' } },
        "Upload File"
    )
), mountNode);

function beforeUpload(info) {
    console.log('beforeUpload callback : ', info);
}

function onChange(info) {
    console.log('onChange callback : ', info);
}})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

ReactDOM.render((
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
        <span class="hljs-attr">listType</span>=<span class="hljs-string">"text"</span>
        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
        <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/png, image/jpg, image/jpeg, image/gif, image/bmp"</span>
        <span class="hljs-attr">data</span>=<span class="hljs-string">{{token:</span> '<span class="hljs-attr">abcd</span>'}}
        <span class="hljs-attr">beforeUpload</span>=<span class="hljs-string">{beforeUpload}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
        <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{[{</span>
            <span class="hljs-attr">name:</span> '<span class="hljs-attr">IMG.png</span>',
            <span class="hljs-attr">state:</span> '<span class="hljs-attr">done</span>',
            <span class="hljs-attr">size:</span> <span class="hljs-attr">1024</span>,
            <span class="hljs-attr">downloadURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">imgURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>'
        }]}
    &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">10px</span>'}}&gt;</span>Upload File<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span></span>
), mountNode);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beforeUpload</span>(<span class="hljs-params">info</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'beforeUpload callback : '</span>, info);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onChange</span>(<span class="hljs-params">info</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onChange callback : '</span>, info);
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>通过 data 控制自定义参数</p>
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-4">
      <div class="demo-list-item-header">
        <a href="#upload-4" class="title">拖拽上传</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-4"></div>
          <script>var mountNode = document.getElementById('react-app-upload-4');</script> <script>(function(){"use strict";

var _next = require("@alife/next");

ReactDOM.render(React.createElement(_next.Upload.Dragger, {
    listType: "image",
    action: "//upload-server.alibaba.net/upload.do",
    accept: "image/png, image/jpg, image/jpeg, image/gif, image/bmp",
    onDragOver: onDragOver,
    onDrop: onDrop
}), mountNode);

function onDragOver() {
    console.log('dragover callback');
}

function onDrop(fileList) {
    console.log('drop callback : ', fileList);
}})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

ReactDOM.render((
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Upload.Dragger</span>
        <span class="hljs-attr">listType</span>=<span class="hljs-string">"image"</span>
        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
        <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/png, image/jpg, image/jpeg, image/gif, image/bmp"</span>
        <span class="hljs-attr">onDragOver</span>=<span class="hljs-string">{onDragOver}</span>
        <span class="hljs-attr">onDrop</span>=<span class="hljs-string">{onDrop}</span>
    /&gt;</span>
), mountNode);

function onDragOver() {
    console.log('dragover callback');
}

function onDrop(fileList) {
    console.log('drop callback : ', fileList);
}</span></code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-9">
      <div class="demo-list-item-header">
        <a href="#upload-9" class="title">粘贴上传</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-9"></div>
          <script>var mountNode = document.getElementById('react-app-upload-9');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var App = function (_React$Component) {
    _inherits(App, _React$Component);

    function App() {
        var _ref;

        var _temp, _this, _ret;

        _classCallCheck(this, App);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = App.__proto__ || Object.getPrototypeOf(App)).call.apply(_ref, [this].concat(args))), _this), _this.onPaste = function (e) {
            e.preventDefault();
            var files = e.clipboardData.files;
            files.length && _this.uploaderRef.selectFiles(files);
        }, _this.saveUploaderRef = function (ref) {
            _this.uploaderRef = ref.getInstance();
        }, _this.onChange = function (value) {
            console.log(value);
        }, _temp), _possibleConstructorReturn(_this, _ret);
    }

    _createClass(App, [{
        key: 'render',
        value: function render() {
            return React.createElement(
                'div',
                null,
                React.createElement(_next.Input.TextArea, { style: { width: '100%', marginBottom: 10 }, autoHeight: { minRows: 4 }, onPaste: this.onPaste }),
                React.createElement(_next.Upload, {
                    action: '//upload-server.alibaba.net/upload.do',
                    listType: 'image',
                    onChange: this.onChange,
                    ref: this.saveUploaderRef
                })
            );
        }
    }]);

    return App;
}(React.Component);

ReactDOM.render(React.createElement(App, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Input } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    onPaste = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        e.preventDefault();
        <span class="hljs-keyword">const</span> files = e.clipboardData.files;
        files.length &amp;&amp; <span class="hljs-keyword">this</span>.uploaderRef.selectFiles(files);
    };

    saveUploaderRef = <span class="hljs-function">(<span class="hljs-params">ref</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.uploaderRef = ref.getInstance();
    };

    onChange = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
        <span class="hljs-built_in">console</span>.log(value);
    };

    render() {
        <span class="hljs-keyword">return</span> (&lt;div&gt;
            &lt;Input.TextArea style={{width: '100%', marginBottom: 10}} autoHeight={{minRows: 4}} onPaste={this.onPaste} /&gt;
            &lt;Upload
                action="//upload-server.alibaba.net/upload.do"
                listType="image"
                onChange={this.onChange}
                ref={this.saveUploaderRef}
            /&gt;
        &lt;/div&gt;);
    }
}

ReactDOM.render(&lt;App/&gt;, mountNode);</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-10">
      <div class="demo-list-item-header">
        <a href="#upload-10" class="title">提交上传</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-10"></div>
          <script>var mountNode = document.getElementById('react-app-upload-10');</script> <script>(function(){"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require("@alife/next");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var App = function (_React$Component) {
    _inherits(App, _React$Component);

    function App() {
        var _ref;

        var _temp, _this, _ret;

        _classCallCheck(this, App);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = App.__proto__ || Object.getPrototypeOf(App)).call.apply(_ref, [this].concat(args))), _this), _this.saveUploaderRef = function (ref) {
            _this.uploaderRef = ref.getInstance();
        }, _this.onSubmit = function () {
            _this.uploaderRef.startUpload();
        }, _temp), _possibleConstructorReturn(_this, _ret);
    }

    _createClass(App, [{
        key: "render",
        value: function render() {
            return React.createElement(
                "div",
                null,
                React.createElement(
                    _next.Upload,
                    {
                        action: "//upload-server.alibaba.net/upload.do",
                        autoUpload: false,
                        ref: this.saveUploaderRef,
                        listType: "text"
                    },
                    React.createElement(
                        _next.Button,
                        null,
                        "Upload"
                    )
                ),
                React.createElement("br", null),
                React.createElement(
                    _next.Button,
                    { type: "primary", onClick: this.onSubmit },
                    "Submit"
                )
            );
        }
    }]);

    return App;
}(React.Component);

ReactDOM.render(React.createElement(App, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{

    saveUploaderRef = <span class="hljs-function">(<span class="hljs-params">ref</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.uploaderRef = ref.getInstance();
    };

    onSubmit = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.uploaderRef.startUpload();
    }

    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
                    <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
                    <span class="hljs-attr">autoUpload</span>=<span class="hljs-string">{false}</span>
                    <span class="hljs-attr">ref</span>=<span class="hljs-string">{this.saveUploaderRef}</span>
                    <span class="hljs-attr">listType</span>=<span class="hljs-string">"text"</span>
                &gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>Upload<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.onSubmit}</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
}

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>, mountNode);</span></code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>通过按钮点击提交上传</p>
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-7">
      <div class="demo-list-item-header">
        <a href="#upload-7" class="title">个数限制</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-7"></div>
          <script>var mountNode = document.getElementById('react-app-upload-7');</script> <script>(function(){"use strict";

var _next = require("@alife/next");

ReactDOM.render(React.createElement(
    _next.Upload,
    {
        action: "//upload-server.alibaba.net/upload.do",
        limit: 3,
        multiple: true,
        listType: "text",
        defaultValue: [{
            name: 'IMG.png',
            state: 'done',
            size: 1024,
            downloadURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
            fileURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
            imgURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
        }]
    },
    React.createElement(
        _next.Button,
        { type: "primary", style: { margin: '0 0 10px' } },
        "Upload File"
    )
), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

ReactDOM.render((
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
        <span class="hljs-attr">limit</span>=<span class="hljs-string">{3}</span>
        <span class="hljs-attr">multiple</span>
        <span class="hljs-attr">listType</span>=<span class="hljs-string">"text"</span>
        <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{[{</span>
            <span class="hljs-attr">name:</span> '<span class="hljs-attr">IMG.png</span>',
            <span class="hljs-attr">state:</span> '<span class="hljs-attr">done</span>',
            <span class="hljs-attr">size:</span> <span class="hljs-attr">1024</span>,
            <span class="hljs-attr">downloadURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">fileURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">imgURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>'
        }]}
    &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">10px</span>'}}&gt;</span>Upload File<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span></span>
), mountNode);
</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-8">
      <div class="demo-list-item-header">
        <a href="#upload-8" class="title">大小限制</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-8"></div>
          <script>var mountNode = document.getElementById('react-app-upload-8');</script> <script>(function(){'use strict';

var _next = require('@alife/next');

var beforeUpload = function beforeUpload(file) {
    return new Promise(function (resolve, reject) {
        var reader = new FileReader();
        reader.onload = function () {
            var img = new Image();
            img.onload = function () {
                if (img.width <= 1200) {
                    resolve();
                } else {
                    _next.Dialog.alert({
                        content: 'Image width ' + img.width + 'px, Exceed limits\uFF01',
                        closable: false,
                        title: 'Warning'
                    });
                    reject();
                }
            };
            img.src = reader.result;
        };
        reader.readAsDataURL(file);
    });
};

ReactDOM.render(React.createElement(
    _next.Upload,
    {
        action: '//upload-server.alibaba.net/upload.do',
        limit: 3,
        multiple: true,
        beforeUpload: beforeUpload,
        listType: 'text',
        defaultValue: [{
            name: 'IMG.png',
            state: 'done',
            size: 1024,
            downloadURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
            fileURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
            imgURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
        }]
    },
    React.createElement(
        _next.Button,
        { type: 'primary', style: { margin: '0 0 10px' } },
        'Upload file'
    )
), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Dialog, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> beforeUpload = <span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> FileReader();
        reader.onload = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> Image();
            img.onload = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                <span class="hljs-keyword">if</span> (img.width &lt;= <span class="hljs-number">1200</span>) {
                    resolve();
                } <span class="hljs-keyword">else</span> {
                    Dialog.alert({
                        <span class="hljs-attr">content</span>: <span class="hljs-string">`Image width <span class="hljs-subst">${img.width}</span>px, Exceed limits！`</span>,
                        <span class="hljs-attr">closable</span>: <span class="hljs-literal">false</span>,
                        <span class="hljs-attr">title</span>: <span class="hljs-string">'Warning'</span>
                    });
                    reject();
                }
            };
            img.src = reader.result;
        };
        reader.readAsDataURL(file);
    });
};

ReactDOM.render((
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
        <span class="hljs-attr">limit</span>=<span class="hljs-string">{3}</span>
        <span class="hljs-attr">multiple</span>
        <span class="hljs-attr">beforeUpload</span>=<span class="hljs-string">{beforeUpload}</span>
        <span class="hljs-attr">listType</span>=<span class="hljs-string">"text"</span>
        <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{[{</span>
            <span class="hljs-attr">name:</span> '<span class="hljs-attr">IMG.png</span>',
            <span class="hljs-attr">state:</span> '<span class="hljs-attr">done</span>',
            <span class="hljs-attr">size:</span> <span class="hljs-attr">1024</span>,
            <span class="hljs-attr">downloadURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">fileURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
            <span class="hljs-attr">imgURL:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>'
        }]}
    &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">10px</span>'}}&gt;</span>Upload file<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span></span>
), mountNode);
</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-12">
      <div class="demo-list-item-header">
        <a href="#upload-12" class="title">内容回填</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-12"></div>
          <script>var mountNode = document.getElementById('react-app-upload-12');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FormItem = _next.Form.Item;

var value = [{
    name: 'pic.png',
    fileName: 'pic.png',
    state: 'done',
    size: 1000,
    downloadURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
    fileURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg',
    imgURL: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
}];

var App = function (_React$Component) {
    _inherits(App, _React$Component);

    function App() {
        var _ref;

        var _temp, _this, _ret;

        _classCallCheck(this, App);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = App.__proto__ || Object.getPrototypeOf(App)).call.apply(_ref, [this].concat(args))), _this), _this.field = new _next.Field(_this), _this.setValues = function () {
            _this.field.setValues({
                upload: [].concat(value)
            });
        }, _this.getValues = function () {
            var values = _this.field.getValues();
            console.log(values);
        }, _temp), _possibleConstructorReturn(_this, _ret);
    }

    _createClass(App, [{
        key: 'render',
        value: function render() {
            var _this2 = this;

            return React.createElement(
                _next.Form,
                { field: this.field },
                React.createElement(
                    FormItem,
                    { required: true },
                    React.createElement(
                        _next.Upload,
                        {
                            listType: 'text',
                            name: 'upload',
                            action: '//upload-server.alibaba.net/upload.do',
                            defaultValue: value
                        },
                        React.createElement(
                            _next.Button,
                            null,
                            'Upload'
                        )
                    )
                ),
                React.createElement(
                    'div',
                    null,
                    React.createElement(
                        _next.Button,
                        { onClick: this.setValues, type: 'primary', style: { margin: '0 0 10px' } },
                        'Set Data'
                    ),
                    '\xA0\xA0',
                    React.createElement(
                        _next.Button,
                        { onClick: this.getValues, type: 'primary', style: { margin: '0 0 10px' } },
                        'Get Data'
                    ),
                    '\xA0\xA0',
                    React.createElement(
                        _next.Button,
                        { onClick: function onClick() {
                                return _this2.field.reset();
                            }, type: 'primary', style: { margin: '0 0 10px' } },
                        'Reset'
                    ),
                    '\xA0\xA0',
                    React.createElement(
                        _next.Button,
                        { onClick: function onClick() {
                                return _this2.field.validate();
                            }, type: 'primary', style: { margin: '0 0 10px' } },
                        'Validate'
                    )
                )
            );
        }
    }]);

    return App;
}(React.Component);

ReactDOM.render(React.createElement(App, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Button, Field, Form } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> FormItem = Form.Item;

<span class="hljs-keyword">const</span> value = [{
    <span class="hljs-attr">name</span>: <span class="hljs-string">'pic.png'</span>,
    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'pic.png'</span>,
    <span class="hljs-attr">state</span>: <span class="hljs-string">'done'</span>,
    <span class="hljs-attr">size</span>: <span class="hljs-number">1000</span>,
    <span class="hljs-attr">downloadURL</span>: <span class="hljs-string">'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'</span>,
    <span class="hljs-attr">fileURL</span>: <span class="hljs-string">'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'</span>,
    <span class="hljs-attr">imgURL</span>: <span class="hljs-string">'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'</span>
}];

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{

    field = <span class="hljs-keyword">new</span> Field(<span class="hljs-keyword">this</span>);

    setValues = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.field.setValues({
            <span class="hljs-attr">upload</span>: [...value]
        });
    };

    getValues = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> values = <span class="hljs-keyword">this</span>.field.getValues();
        <span class="hljs-built_in">console</span>.log(values);
    };

    render() {

        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Form</span> <span class="hljs-attr">field</span>=<span class="hljs-string">{this.field}</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">FormItem</span> <span class="hljs-attr">required</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
                        <span class="hljs-attr">listType</span>=<span class="hljs-string">"text"</span>
                        <span class="hljs-attr">name</span>=<span class="hljs-string">"upload"</span>
                        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
                        <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{value}</span>
                    &gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>Upload<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">FormItem</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.setValues}</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">10px</span>'}}&gt;</span>Set Data<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>&amp;nbsp;&amp;nbsp;
                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.getValues}</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">10px</span>'}}&gt;</span>Get Data<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>&amp;nbsp;&amp;nbsp;
                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> this.field.reset()} type="primary" style={{margin: '0 0 10px'}}&gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>&amp;nbsp;&amp;nbsp;
                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> this.field.validate()} type="primary" style={{margin: '0 0 10px'}}&gt;Validate<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
        );
    }
}

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>, mountNode);</span></code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-5">
      <div class="demo-list-item-header">
        <a href="#upload-5" class="title">额外内容</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-5"></div>
          <script>var mountNode = document.getElementById('react-app-upload-5');</script> <script>(function(){"use strict";

var _next = require("@alife/next");

var extraRender = function extraRender(file) {
    console.log(file);
    return React.createElement(
        _next.Button,
        { style: { marginLeft: 4 } },
        "extra"
    );
};

ReactDOM.render(React.createElement(
    _next.Upload,
    {
        listType: "image",
        action: "//upload-server.alibaba.net/upload.do",
        accept: "image/png, image/jpg, image/jpeg, image/gif, image/bmp",
        beforeUpload: beforeUpload,
        onChange: onChange,
        extraRender: extraRender,
        defaultValue: [{
            name: 'IMG.png',
            state: 'done',
            size: 100,
            url: 'https://img.alicdn.com/tps/TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg'
        }]
    },
    React.createElement(
        _next.Button,
        { type: "primary", style: { margin: '0 0 10px' } },
        "Upload File"
    )
), mountNode);

function beforeUpload(info) {
    console.log('beforeUpload callback : ', info);
}

function onChange(info) {
    console.log('onChange callback : ', info);
}})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> extraRender = <span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(file);
    <span class="hljs-keyword">return</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{marginLeft:</span> <span class="hljs-attr">4</span>}}&gt;</span>extra<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>);
};

ReactDOM.render((
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Upload</span>
        <span class="hljs-attr">listType</span>=<span class="hljs-string">"image"</span>
        <span class="hljs-attr">action</span>=<span class="hljs-string">"//upload-server.alibaba.net/upload.do"</span>
        <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/png, image/jpg, image/jpeg, image/gif, image/bmp"</span>
        <span class="hljs-attr">beforeUpload</span>=<span class="hljs-string">{beforeUpload}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
        <span class="hljs-attr">extraRender</span>=<span class="hljs-string">{extraRender}</span>
        <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">{[{</span>
            <span class="hljs-attr">name:</span> '<span class="hljs-attr">IMG.png</span>',
            <span class="hljs-attr">state:</span> '<span class="hljs-attr">done</span>',
            <span class="hljs-attr">size:</span> <span class="hljs-attr">100</span>,
            <span class="hljs-attr">url:</span> '<span class="hljs-attr">https:</span>//<span class="hljs-attr">img.alicdn.com</span>/<span class="hljs-attr">tps</span>/<span class="hljs-attr">TB19O79MVXXXXcZXVXXXXXXXXXX-1024-1024.jpg</span>',
        }]}
    &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">10px</span>'}}&gt;</span>Upload File<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Upload</span>&gt;</span></span>
), mountNode);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beforeUpload</span>(<span class="hljs-params">info</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'beforeUpload callback : '</span>, info);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onChange</span>(<span class="hljs-params">info</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onChange callback : '</span>, info);
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="upload-2">
      <div class="demo-list-item-header">
        <a href="#upload-2" class="title">裁剪上传</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-upload-2"></div>
          <script>var mountNode = document.getElementById('react-app-upload-2');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

var _reactCropper = require('react-cropper');

var _reactCropper2 = _interopRequireDefault(_reactCropper);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function convertBase64UrlToFile(urlData) {

    var bytes = window.atob(urlData.split(',')[1]);

    var ab = new ArrayBuffer(bytes.length);
    var ia = new Uint8Array(ab);
    for (var i = 0; i < bytes.length; i++) {
        ia[i] = bytes.charCodeAt(i);
    }

    var blob = new Blob([ab], { type: 'image/png' });

    return new File([blob], 'test.png', { type: 'image/png' });
}

var App = function (_React$Component) {
    _inherits(App, _React$Component);

    function App(props) {
        _classCallCheck(this, App);

        var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));

        _this.state = {
            src: null,
            visible: false,
            img: null
        };

        _this.onSuccess = function (value) {
            console.log(value);
            _this.setState({
                img: value.url
            });
        };

        _this.onSelect = function (files) {
            var reader = new FileReader();
            reader.onload = function () {
                _this.setState({
                    src: reader.result,
                    visible: true
                });
            };
            reader.readAsDataURL(files[0]);
        };

        _this.onCancel = function () {
            _this.setState({
                visible: false
            });
        };

        _this.onOk = function () {

            var data = _this.cropperRef.getCroppedCanvas().toDataURL();

            var blob = convertBase64UrlToFile(data);
            var file = new File([blob], 'test.png', { type: 'image/png' });

            // start upload
            _this.uploader.startUpload(file);

            _this.setState({
                visible: false
            });
        };

        _this.saveCropperrRef = function (ref) {
            _this.cropperRef = ref;
        };

        _this.uploader = new _next.Upload.Uploader({
            action: '//upload-server.alibaba.net/upload.do',
            onSuccess: _this.onSuccess,
            name: 'file'
        });
        return _this;
    }

    _createClass(App, [{
        key: 'render',
        value: function render() {
            return React.createElement(
                'div',
                null,
                React.createElement(
                    _next.Upload.Selecter,
                    { onSelect: this.onSelect
                    },
                    React.createElement(
                        _next.Button,
                        null,
                        'Select file'
                    )
                ),
                React.createElement(
                    _next.Dialog,
                    { visible: this.state.visible, onCancel: this.onCancel, onOk: this.onOk, isFullScreen: true },
                    React.createElement(_reactCropper2.default, {
                        ref: this.saveCropperrRef,
                        src: this.state.src,
                        style: { height: 300, width: 400 }
                    })
                ),
                React.createElement(
                    'div',
                    null,
                    React.createElement('img', { src: this.state.img, style: { width: 100 } })
                )
            );
        }
    }]);

    return App;
}(React.Component);

ReactDOM.render(React.createElement(App, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Upload, Button, Dialog } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">import</span> Cropper <span class="hljs-keyword">from</span> <span class="hljs-string">'react-cropper'</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convertBase64UrlToFile</span>(<span class="hljs-params">urlData</span>) </span>{

    <span class="hljs-keyword">const</span> bytes = <span class="hljs-built_in">window</span>.atob(urlData.split(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>]);

    <span class="hljs-keyword">const</span> ab = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(bytes.length);
    <span class="hljs-keyword">const</span> ia = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(ab);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bytes.length; i++) {
        ia[i] = bytes.charCodeAt(i);
    }

    <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> Blob([ab], {<span class="hljs-attr">type</span>: <span class="hljs-string">'image/png'</span>});

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> File([blob], <span class="hljs-string">'test.png'</span>, {<span class="hljs-attr">type</span>: <span class="hljs-string">'image/png'</span>});
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);
        <span class="hljs-keyword">this</span>.uploader = <span class="hljs-keyword">new</span> Upload.Uploader({
            <span class="hljs-attr">action</span>: <span class="hljs-string">'//upload-server.alibaba.net/upload.do'</span>,
            <span class="hljs-attr">onSuccess</span>: <span class="hljs-keyword">this</span>.onSuccess,
            <span class="hljs-attr">name</span>: <span class="hljs-string">'file'</span>
        });
    }

    state = {
        <span class="hljs-attr">src</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">visible</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">img</span>: <span class="hljs-literal">null</span>,
    };

    onSuccess = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
        <span class="hljs-built_in">console</span>.log(value);
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">img</span>: value.url
        });
    };

    onSelect = <span class="hljs-function">(<span class="hljs-params">files</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> FileReader();
        reader.onload = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">this</span>.setState({
                <span class="hljs-attr">src</span>: reader.result,
                <span class="hljs-attr">visible</span>: <span class="hljs-literal">true</span>,
            });
        };
        reader.readAsDataURL(files[<span class="hljs-number">0</span>]);
    };

    onCancel = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">visible</span>: <span class="hljs-literal">false</span>,
        });
    };

    onOk = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {

        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">this</span>.cropperRef.getCroppedCanvas().toDataURL();

        <span class="hljs-keyword">const</span> blob = convertBase64UrlToFile(data);
        <span class="hljs-keyword">const</span> file = <span class="hljs-keyword">new</span> File([blob], <span class="hljs-string">'test.png'</span>, {<span class="hljs-attr">type</span>: <span class="hljs-string">'image/png'</span>});

        <span class="hljs-comment">// start upload</span>
        <span class="hljs-keyword">this</span>.uploader.startUpload(file);

        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">visible</span>: <span class="hljs-literal">false</span>,
        });
    };

    saveCropperrRef = <span class="hljs-function">(<span class="hljs-params">ref</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.cropperRef = ref;
    };

    render() {
        <span class="hljs-keyword">return</span> (
            &lt;div&gt;
                &lt;Upload.Selecter onSelect={this.onSelect}
                &gt;
                    &lt;Button&gt;Select file&lt;/Button&gt;
                &lt;/Upload.Selecter&gt;
                &lt;Dialog visible={this.state.visible} onCancel={this.onCancel} onOk={this.onOk} isFullScreen&gt;
                    &lt;Cropper
                        ref={this.saveCropperrRef}
                        src={this.state.src}
                        style={{height: 300, width: 400}}
                    /&gt;
                &lt;/Dialog&gt;
                &lt;div&gt;&lt;img src={this.state.img} style={{width: 100}}/&gt;&lt;/div&gt;
            &lt;/div&gt;
        );
    }
}

ReactDOM.render(&lt;App/&gt;, mountNode);</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>提醒: <code>//upload-server.alibaba.net/upload.do</code>接口:</p>
<blockquote>
<ol>
<li>该接口仅作为测试使用,业务请勿使用</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>该接口仅支持图片上传,其他文件类型接口请自备</li>
</ol>
</blockquote>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
  </div>
  <div class="demo-api">
    <div class="title">API</div>
    <div class="demo-api-body markdown" id="demo-api"></div>
  </div>
</div>

  <script src="./statics/common.js"></script>
  <script src="./statics/demo-util.js"></script>
</body>

</html>
