

<!doctype html>
<html>

<head>
  <title>Affix</title>
  <meta charset="utf-8" />
  <meta name="description" content="Fusion Dev" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="./statics/TB1LG1yhMoQMeJjy0FoXXcShVXa-32-33.png" sizes="32x32">
  <link rel="stylesheet" href="./statics/style-demo.css"> 
<link rel="stylesheet" href="./statics/next.min.css"></link>

  <script src="./statics/react-16-2-0-react-development-js,react-16-2-0-react-dom-development-js,jquery-1-11-3-jquery-min.js"></script>
  <script src="./statics/prop-types.min.js"></script>
  <script src="./statics/moment-with-locales.min.js"></script>
</head>

<body><script>
with(document)with(body)with(insertBefore(createElement("script"),firstChild))setAttribute("exparams","category=&userid=&aplus&yunid=&&trid=0be21d0315249006517384900e7a34&asid=AQAAAAAsI+Rauxn6ewAAAAC7nA3EXZbrNw==",id="tb-beacon-aplus",src=(location>"https"?"//g":"//g")+".alicdn.com/alilog/mlog/aplus_v2.js")
</script>

  
<script src="./statics/common-js,next.js"></script>
<script src="./statics/next-with-locales.min.js"></script>
<script>
  window.react = window.React;
  window['react-dom'] = window.ReactDOM;
  window['prop-types'] = window.PropTypes;
  window['@alife/next'] = window.Next;
  window.ConfigProvider = window.Next.ConfigProvider;
  window.customIcons = [];

  
  (function () {
    ConfigProvider.initLocales(window.Next.locales);
    var fusionLocale = 'zh_CN';
    ConfigProvider.setLanguage(fusionLocale === 'en_US' ? 'en-us' : 'zh-cn');
  })();
  
</script>

<div class="demo-wrapper pc">
  <div class="demo-index">
    <ul class="demo-index-list">
      
      <li class="demo-index-item">
        <a href="#demo-guide">开发指南</a>
      </li>
      <li class="demo-index-item">
        <a href="#demo-list">组件示例</a>
      </li>
       
      <li class="demo-index-item demo-index-item-sub">
        <a href="#affix-0">基本</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#affix-2">自定义偏移量</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#affix-1">自定义目标容器</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#affix-3">onAffix</a>
      </li>
       
      <li class="demo-index-item">
        <a href="#demo-api">API</a>
      </li>
      
    </ul>
  </div>

  
  <div class="demo-header">
    <div class="title">
       固钉  Affix
    </div>
  </div>
  <div class="demo-guide markdown" id="demo-guide"><h2 id="guide">Guide<a href="#guide" class="anchor">#</a></h2><h3 id="何时使用">何时使用<a href="#何时使用" class="anchor">#</a></h3><p>当用户需要将某个组件固定在页面的某个位置时，可以使用 Affix 组件进行固定。</p>
<h2 id="api">API<a href="#api" class="anchor">#</a></h2><h3 id="affix">Affix<a href="#affix" class="anchor">#</a></h3><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>container</td>
<td>设置 Affix 需要监听滚动事件的容器元素<br><br><strong>签名</strong>:<br>Function() =&gt; ReactElement<br><strong>返回值</strong>:<br>{ReactElement} 目标容器元素的实例<br></td>
<td>Function</td>
<td>() =&gt; window</td>
</tr>
<tr>
<td>offsetTop</td>
<td>距离窗口顶部达到指定偏移量后触发</td>
<td>Number</td>
<td>-</td>
</tr>
<tr>
<td>offsetBottom</td>
<td>距离窗口底部达到制定偏移量后触发</td>
<td>Number</td>
<td>-</td>
</tr>
<tr>
<td>onAffix</td>
<td>当元素的样式发生固钉样式变化时触发的回调函数<br><br><strong>签名</strong>:<br>Function(元素是否被固钉: Boolean) =&gt; void<br><strong>参数</strong>:<br><em>元素是否被固钉</em>: {Boolean} null</td>
<td>Function</td>
<td>func.noop</td>
</tr>
</tbody>
</table>
</div>
  

  <div class="demo-list" id="demo-list">
    
    <div class="demo-list-item" id="affix-0">
      <div class="demo-list-item-header">
        <a href="#affix-0" class="title">基本</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-affix-0"></div>
          <script>var mountNode = document.getElementById('react-app-affix-0');</script> <script>(function(){"use strict";

var _next = require("@alife/next");

ReactDOM.render(React.createElement(
    "div",
    { className: "custom-affix-wrapper" },
    React.createElement(
        _next.Affix,
        null,
        React.createElement(
            _next.Button,
            { type: "secondary" },
            "Affixed Button"
        )
    )
), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Affix, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"custom-affix-wrapper"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Affix</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"secondary"</span>&gt;</span>Affixed Button<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Affix</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>, mountNode);</code></pre></div><style type="text/css">.custom-affix-wrapper {
    padding: 40px 0;
}</style><div class="highlight"><pre><code class="css"><span class="hljs-selector-class">.custom-affix-wrapper</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span> <span class="hljs-number">0</span>;
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>默认情况下，Affix 的默认目标容器元素是整个 <code>window</code>，并且 <code>offsetTop = 0</code>，
也就意味着当页面往下滚动时，当 Affix 元素接触到浏览器边框时，此时会将 Affix 钉住。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="affix-2">
      <div class="demo-list-item-header">
        <a href="#affix-2" class="title">自定义偏移量</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-affix-2"></div>
          <script>var mountNode = document.getElementById('react-app-affix-2');</script> <script>(function(){"use strict";

var _next = require("@alife/next");

ReactDOM.render(React.createElement(
    "div",
    { className: "custom-affix-wrapper" },
    React.createElement(
        _next.Affix,
        { offsetBottom: 0 },
        React.createElement(
            _next.Button,
            { type: "secondary" },
            "Affixed Button"
        )
    )
), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Affix, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"custom-affix-wrapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Affix</span> <span class="hljs-attr">offsetBottom</span>=<span class="hljs-string">{0}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"secondary"</span>&gt;</span>Affixed Button<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Affix</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>, mountNode);</code></pre></div><style type="text/css">.custom-affix-wrapper {
    padding: 40px 0;
}</style><div class="highlight"><pre><code class="css"><span class="hljs-selector-class">.custom-affix-wrapper</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span> <span class="hljs-number">0</span>;
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>可以通过 <code>offsetTop</code> 或 <code>offsetBottom</code> 自定义偏移量。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="affix-1">
      <div class="demo-list-item-header">
        <a href="#affix-1" class="title">自定义目标容器</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-affix-1"></div>
          <script>var mountNode = document.getElementById('react-app-affix-1');</script> <script>(function(){"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require("@alife/next");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo() {
        _classCallCheck(this, Demo);

        return _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).apply(this, arguments));
    }

    _createClass(Demo, [{
        key: "_containerRefHandler",
        value: function _containerRefHandler(ref) {
            this.container = ref;
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            return React.createElement(
                "div",
                { className: "custom-affix-container", ref: this._containerRefHandler.bind(this) },
                React.createElement(
                    "div",
                    { className: "a-wrapper" },
                    React.createElement(
                        _next.Affix,
                        { container: function container() {
                                return _this2.container;
                            }, offsetTop: 0 },
                        React.createElement(
                            _next.Button,
                            { type: "secondary" },
                            "Affixed Button"
                        )
                    )
                )
            );
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Affix, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{

    _containerRefHandler(ref) {
        <span class="hljs-keyword">this</span>.container = ref;
    }

    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"custom-affix-container"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{this._containerRefHandler.bind(this)}</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"a-wrapper"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">Affix</span> <span class="hljs-attr">container</span>=<span class="hljs-string">{()</span> =&gt;</span> this.container} offsetTop={0}&gt;
                        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"secondary"</span>&gt;</span>Affixed Button<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">Affix</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
}

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span>, mountNode);</span></code></pre></div><style type="text/css">.custom-affix-container {
    height: 150px;
    overflow-y: scroll;
    background: url(https://img.alicdn.com/tfs/TB1AbJXSpXXXXXJXpXXXXXXXXXX-32-32.jpg) repeat 50% 50%;
}

.custom-affix-container .a-wrapper {
    padding-top: 50px;
    height: 500px;
}</style><div class="highlight"><pre><code class="css"><span class="hljs-selector-class">.custom-affix-container</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;
    <span class="hljs-attribute">overflow-y</span>: scroll;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(https://img.alicdn.com/tfs/TB1AbJXSpXXXXXJXpXXXXXXXXXX-32-32.jpg) repeat <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>;
}

<span class="hljs-selector-class">.custom-affix-container</span> <span class="hljs-selector-class">.a-wrapper</span> {
    <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">50px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>可以通过 <code>container</code> 属性设置 Affix 组件需要监听其滚动事件的元素，该属性接收一个函数作为参数，默认为 <code>() =&gt; window</code>。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="affix-3">
      <div class="demo-list-item-header">
        <a href="#affix-3" class="title">onAffix</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-affix-3"></div>
          <script>var mountNode = document.getElementById('react-app-affix-3');</script> <script>(function(){"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require("@alife/next");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo(props) {
        _classCallCheck(this, Demo);

        var _this = _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).call(this, props));

        _this.onAffix = function (affixed) {
            _this.setState({
                affixed: affixed
            });
        };

        _this.state = {
            affixed: false
        };
        return _this;
    }

    _createClass(Demo, [{
        key: "render",
        value: function render() {
            var state = this.state;

            return React.createElement(
                "div",
                { className: "affix-demo-wrapper" },
                React.createElement(
                    _next.Affix,
                    { onAffix: this.onAffix },
                    React.createElement(
                        _next.Button,
                        { type: "secondary" },
                        state.affixed ? 'Affixed Button' : 'Unaffixed Button'
                    )
                )
            );
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Affix, Button } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{

    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);
        <span class="hljs-keyword">this</span>.state = {
            <span class="hljs-attr">affixed</span>: <span class="hljs-literal">false</span>,
        };
    }

    onAffix = <span class="hljs-function">(<span class="hljs-params">affixed</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState({
            affixed,
        });
    }

    render() {
        <span class="hljs-keyword">const</span> state = <span class="hljs-keyword">this</span>.state;

        <span class="hljs-keyword">return</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"affix-demo-wrapper"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Affix</span> <span class="hljs-attr">onAffix</span>=<span class="hljs-string">{this.onAffix}</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"secondary"</span>&gt;</span>{state.affixed ? 'Affixed Button' : 'Unaffixed Button'}<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Affix</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>);
    }
}

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span>, mountNode);</span></code></pre></div><style type="text/css">.affix-demo-wrapper {
    padding: 40px 0;
}</style><div class="highlight"><pre><code class="css"><span class="hljs-selector-class">.affix-demo-wrapper</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span> <span class="hljs-number">0</span>;
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>可以通过传入 <code>onAffix</code> 的事件回调函数来监听元素是否发生了固钉状态。该函数会在状态变化时返回固钉状态。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
  </div>
  <div class="demo-api">
    <div class="title">API</div>
    <div class="demo-api-body markdown" id="demo-api"></div>
  </div>
</div>

  <script src="./statics/common.js"></script>
  <script src="./statics/demo-util.js"></script>
</body>

</html>
