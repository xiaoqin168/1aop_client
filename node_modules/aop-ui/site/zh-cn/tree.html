

<!doctype html>
<html>

<head>
  <title>Tree</title>
  <meta charset="utf-8" />
  <meta name="description" content="Fusion Dev" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="./statics/TB1LG1yhMoQMeJjy0FoXXcShVXa-32-33.png" sizes="32x32">
  <link rel="stylesheet" href="./statics/style-demo.css"> 
<link rel="stylesheet" href="./statics/next.min.css"></link>

  <script src="./statics/react-16-2-0-react-development-js,react-16-2-0-react-dom-development-js,jquery-1-11-3-jquery-min.js"></script>
  <script src="./statics/prop-types.min.js"></script>
  <script src="./statics/moment-with-locales.min.js"></script>
</head>

<body><script>
with(document)with(body)with(insertBefore(createElement("script"),firstChild))setAttribute("exparams","category=&userid=&aplus&yunid=&&trid=0bbbeff215249006517291996e1a7c&asid=AQAAAAAsI+Ra/pYQTgAAAAAfS+oMFyZcnQ==",id="tb-beacon-aplus",src=(location>"https"?"//g":"//g")+".alicdn.com/alilog/mlog/aplus_v2.js")
</script>

  
<script src="./statics/common-js,next.js"></script>
<script src="./statics/next-with-locales.min.js"></script>
<script>
  window.react = window.React;
  window['react-dom'] = window.ReactDOM;
  window['prop-types'] = window.PropTypes;
  window['@alife/next'] = window.Next;
  window.ConfigProvider = window.Next.ConfigProvider;
  window.customIcons = [];

  
  (function () {
    ConfigProvider.initLocales(window.Next.locales);
    var fusionLocale = 'zh_CN';
    ConfigProvider.setLanguage(fusionLocale === 'en_US' ? 'en-us' : 'zh-cn');
  })();
  
</script>

<div class="demo-wrapper pc">
  <div class="demo-index">
    <ul class="demo-index-list">
      
      <li class="demo-index-item">
        <a href="#demo-guide">开发指南</a>
      </li>
      <li class="demo-index-item">
        <a href="#demo-list">组件示例</a>
      </li>
       
      <li class="demo-index-item demo-index-item-sub">
        <a href="#tree-0">基本</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#tree-3">使用数据直接生成</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#tree-6">带线样式</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#tree-7">树节点占满一行</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#tree-2">单选与多选</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#tree-1">父子节点选中是否关联</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#tree-8">可搜索的树</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#tree-5">异步加载数据</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#tree-4">拖动</a>
      </li>
       
      <li class="demo-index-item">
        <a href="#demo-api">API</a>
      </li>
      
    </ul>
  </div>

  
  <div class="demo-header">
    <div class="title">
       树形控件  Tree
    </div>
  </div>
  <div class="demo-guide markdown" id="demo-guide"><h2 id="开发指南">开发指南<a href="#开发指南" class="anchor">#</a></h2><h3 id="何时使用">何时使用<a href="#何时使用" class="anchor">#</a></h3><p>文件夹、组织架构、生物分类、国家地区等等，世间万物的大多数结构都是树形结构。使用<code>树控件</code>可以完整展现其中的层级关系，并具有展开收起选择等交互功能。</p>
<h2 id="api">API<a href="#api" class="anchor">#</a></h2><h3 id="tree">Tree<a href="#tree" class="anchor">#</a></h3><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>children</td>
<td>树节点</td>
<td>ReactNode</td>
<td>-</td>
</tr>
<tr>
<td>dataSource</td>
<td>数据源，该属性优先级高于 children</td>
<td>Array</td>
<td>-</td>
</tr>
<tr>
<td>showLine</td>
<td>是否显示树的线</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>selectable</td>
<td>是否支持选中节点</td>
<td>Boolean</td>
<td>true</td>
</tr>
<tr>
<td>selectedKeys</td>
<td>（用于受控）当前选中节点 key 的数组</td>
<td>Array&lt;String&gt;</td>
<td>-</td>
</tr>
<tr>
<td>defaultSelectedKeys</td>
<td>（用于非受控）默认选中节点 key 的数组</td>
<td>Array&lt;String&gt;</td>
<td>[]</td>
</tr>
<tr>
<td>onSelect</td>
<td>选中或取消选中节点时触发的回调函数<br><br><strong>签名</strong>:<br>Function(selectedKeys: Array, extra: Object) =&gt; void<br><strong>参数</strong>:<br><em>selectedKeys</em>: {Array} 选中节点key的数组<br><em>extra</em>: {Object} 额外参数<br><em>extra.selectedNodes</em>: {Array} 选中节点的数组<br><em>extra.node</em>: {Object} 当前操作的节点<br><em>extra.selected</em>: {Boolean} 当前操作是否是选中</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>multiple</td>
<td>是否支持多选</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>checkable</td>
<td>是否支持勾选节点的复选框</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>checkedKeys</td>
<td>（用于受控）当前勾选复选框节点 key 的数组或 <code>{checked: Array, indeterminate: Array}</code> 的对象</td>
<td>Array&lt;String&gt;/Object</td>
<td>-</td>
</tr>
<tr>
<td>defaultCheckedKeys</td>
<td>（用于非受控）默认勾选复选框节点 key 的数组</td>
<td>Array&lt;String&gt;</td>
<td>[]</td>
</tr>
<tr>
<td>checkStrictly</td>
<td>勾选节点复选框是否完全受控（父子节点选中状态不再关联）</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>checkedStrategy</td>
<td>定义选中时回填的方式<br><br><strong>可选值</strong>:<br>&#39;all&#39;(返回所有选中的节点)<br>&#39;parent&#39;(父子节点都选中时只返回父节点)<br>&#39;child&#39;(父子节点都选中时只返回子节点)</td>
<td>Enum</td>
<td>&#39;all&#39;</td>
</tr>
<tr>
<td>onCheck</td>
<td>勾选或取消勾选复选框时触发的回调函数<br><br><strong>签名</strong>:<br>Function(checkedKeys: Array, extra: Object) =&gt; void<br><strong>参数</strong>:<br><em>checkedKeys</em>: {Array} 勾选复选框节点key的数组<br><em>extra</em>: {Object} 额外参数<br><em>extra.checkedNodes</em>: {Array} 勾选复选框节点的数组<br><em>extra.checkedNodesPositions</em>: {Array} 包含有勾选复选框节点和其位置的对象的数组<br><em>extra.indeterminateKeys</em>: {Array} 半选复选框节点 key 的数组<br><em>extra.node</em>: {Object} 当前操作的节点<br><em>extra.checked</em>: {Boolean} 当前操作是否是勾选</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>expandedKeys</td>
<td>（用于受控）当前展开的节点 key 的数组</td>
<td>Array&lt;String&gt;</td>
<td>-</td>
</tr>
<tr>
<td>defaultExpandedKeys</td>
<td>（用于非受控）默认展开的节点 key 的数组</td>
<td>Array&lt;String&gt;</td>
<td>[]</td>
</tr>
<tr>
<td>defaultExpandAll</td>
<td>是否默认展开所有节点</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>autoExpandParent</td>
<td>是否自动展开父节点</td>
<td>Boolean</td>
<td>true</td>
</tr>
<tr>
<td>onExpand</td>
<td>展开或收起节点时触发的回调函数<br><br><strong>签名</strong>:<br>Function(expandedKeys: Array, extra: Object) =&gt; void<br><strong>参数</strong>:<br><em>expandedKeys</em>: {Array} 展开的节点key的数组<br><em>extra</em>: {Object} 额外参数<br><em>extra.node</em>: {Object} 当前操作的节点<br><em>extra.expanded</em>: {Boolean} 当前操作是否是展开</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>editable</td>
<td>是否支持编辑节点内容</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>onEditFinish</td>
<td>编辑节点内容完成时触发的回调函数<br><br><strong>签名</strong>:<br>Function(key: String, label: String, node: Object) =&gt; void<br><strong>参数</strong>:<br><em>key</em>: {String} 编辑节点的 key<br><em>label</em>: {String} 编辑节点完成时节点的文本<br><em>node</em>: {Object} 当前编辑的节点</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>draggable</td>
<td>是否支持拖拽节点</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>onDragStart</td>
<td>开始拖拽节点时触发的回调函数<br><br><strong>签名</strong>:<br>Function(info: Object) =&gt; void<br><strong>参数</strong>:<br><em>info</em>: {Object} 拖拽信息<br><em>info.event</em>: {Object} 事件对象<br><em>info.node</em>: {Object} 拖拽的节点</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>onDragEnter</td>
<td>拖拽节点进入目标节点时触发的回调函数<br><br><strong>签名</strong>:<br>Function(info: Object) =&gt; void<br><strong>参数</strong>:<br><em>info</em>: {Object} 拖拽信息<br><em>info.event</em>: {Object} 事件对象<br><em>info.node</em>: {Object} 目标节点<br><em>info.expandedKeys</em>: {Array} 当前展开的节点key的数组</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>onDragOver</td>
<td>拖拽节点在目标节点上移动的时候触发的回调函数<br><br><strong>签名</strong>:<br>Function(info: Object) =&gt; void<br><strong>参数</strong>:<br><em>info</em>: {Object} 拖拽信息<br><em>info.event</em>: {Object} 事件对象<br><em>info.node</em>: {Object} 目标节点</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>onDragLeave</td>
<td>拖拽节点离开目标节点时触发的回调函数<br><br><strong>签名</strong>:<br>Function(info: Object) =&gt; void<br><strong>参数</strong>:<br><em>info</em>: {Object} 拖拽信息<br><em>info.event</em>: {Object} 事件对象<br><em>info.node</em>: {Object} 目标节点</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>onDragEnd</td>
<td>拖拽节点拖拽结束时触发的回调函数<br><br><strong>签名</strong>:<br>Function(info: Object) =&gt; void<br><strong>参数</strong>:<br><em>info</em>: {Object} 拖拽信息<br><em>info.event</em>: {Object} 事件对象<br><em>info.node</em>: {Object} 目标节点</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>onDrop</td>
<td>拖拽节点放入目标节点内或前后触发的回调函数<br><br><strong>签名</strong>:<br>Function(info: Object) =&gt; void<br><strong>参数</strong>:<br><em>info</em>: {Object} 拖拽信息<br><em>info.event</em>: {Object} 事件对象<br><em>info.node</em>: {Object} 目标节点<br><em>info.dragNode</em>: {Object} 拖拽的节点<br><em>info.dragNodesKeys</em>: {Array} 拖拽的节点和其子节点 key 的数组<br><em>info.dropPosition</em>: {Number} 放置位置，-1代表当前节点前，0代表当前节点里，1代表当前节点后</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>canDrop</td>
<td>节点是否可被作为拖拽的目标节点<br><br><strong>签名</strong>:<br>Function(info: Object) =&gt; Boolean<br><strong>参数</strong>:<br><em>info</em>: {Object} 拖拽信息<br><em>info.node</em>: {Object} 目标节点<br><em>info.dragNode</em>: {Object} 拖拽的节点<br><em>info.dragNodesKeys</em>: {Array} 拖拽的节点和其子节点 key 的数组<br><em>info.dropPosition</em>: {Number} 放置位置，-1代表当前节点前，0代表当前节点里，1代表当前节点后<br><strong>返回值</strong>:<br>{Boolean} 是否可以被当作目标节点<br></td>
<td>Function</td>
<td>() =&gt; true</td>
</tr>
<tr>
<td>loadData</td>
<td>异步加载数据的函数<br><br><strong>签名</strong>:<br>Function(node: Object) =&gt; void<br><strong>参数</strong>:<br><em>node</em>: {Object} 被点击展开的节点</td>
<td>Function</td>
<td>-</td>
</tr>
<tr>
<td>filterTreeNode</td>
<td>按需筛选高亮节点<br><br><strong>签名</strong>:<br>Function(node: Object) =&gt; Boolean<br><strong>参数</strong>:<br><em>node</em>: {Object} 待筛选的节点<br><strong>返回值</strong>:<br>{Boolean} 是否被筛选中<br></td>
<td>Function</td>
<td>-</td>
</tr>
<tr>
<td>onRightClick</td>
<td>右键点击节点时触发的回调函数<br><br><strong>签名</strong>:<br>Function(info: Object) =&gt; void<br><strong>参数</strong>:<br><em>info</em>: {Object} 信息对象<br><em>info.event</em>: {Object} 事件对象<br><em>info.node</em>: {Object} 点击的节点</td>
<td>Function</td>
<td>-</td>
</tr>
<tr>
<td>isLabelBlock</td>
<td>设置节点是否占满剩余空间，一般用于统一在各节点右侧添加元素(借助 flex 实现，暂时只支持 ie10+)</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>isNodeBlock</td>
<td>设置节点是否占满一行</td>
<td>Boolean/Object</td>
<td>false</td>
</tr>
<tr>
<td>animation</td>
<td>是否开启展开收起动画</td>
<td>Boolean</td>
<td>true</td>
</tr>
</tbody>
</table>
<h3 id="tree-node">Tree.Node<a href="#tree-node" class="anchor">#</a></h3><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>类型</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>children</td>
<td>树节点</td>
<td>ReactNode</td>
<td>-</td>
</tr>
<tr>
<td>label</td>
<td>节点文本内容</td>
<td>ReactNode</td>
<td>&#39;---&#39;</td>
</tr>
<tr>
<td>selectable</td>
<td>单独设置是否支持选中，覆盖 Tree 的 selectable</td>
<td>Boolean</td>
<td>-</td>
</tr>
<tr>
<td>checkable</td>
<td>单独设置是否出现复选框，覆盖 Tree 的 checkable</td>
<td>Boolean</td>
<td>-</td>
</tr>
<tr>
<td>editable</td>
<td>单独设置是否支持编辑，覆盖 Tree 的 editable</td>
<td>Boolean</td>
<td>-</td>
</tr>
<tr>
<td>draggable</td>
<td>单独设置是否支持拖拽，覆盖 Tree 的 draggable</td>
<td>Boolean</td>
<td>-</td>
</tr>
<tr>
<td>disabled</td>
<td>是否禁止节点响应</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>checkboxDisabled</td>
<td>是否禁止勾选节点复选框</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>isLeaf</td>
<td>是否是叶子节点，设置loadData时生效</td>
<td>Boolean</td>
<td>false</td>
</tr>
</tbody>
</table>
<!-- api-extra-start -->
<p>可以为 Tree.Node 设置 <code>key</code> 值：<code>&lt;TreeNode key=&quot;102894&quot; label=&quot;女装&quot; /&gt;</code>，一般为数据的 id 值，但必需保证其全局唯一性，<code>key</code> 的默认值为 Tree 内部计算出的位置字符串。</p>
<!-- api-extra-end -->
</div>
  

  <div class="demo-list" id="demo-list">
    
    <div class="demo-list-item" id="tree-0">
      <div class="demo-list-item-header">
        <a href="#tree-0" class="title">基本</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-tree-0"></div>
          <script>var mountNode = document.getElementById('react-app-tree-0');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TreeNode = _next.Tree.Node;

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo() {
        _classCallCheck(this, Demo);

        return _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).apply(this, arguments));
    }

    _createClass(Demo, [{
        key: 'onSelect',
        value: function onSelect(keys, info) {
            console.log('onSelect', keys, info);
        }
    }, {
        key: 'onCheck',
        value: function onCheck(keys, info) {
            console.log('onCheck', keys, info);
        }
    }, {
        key: 'onEditFinish',
        value: function onEditFinish(key, label, node) {
            console.log('onEditFinish', key, label, node);
        }
    }, {
        key: 'onRightClick',
        value: function onRightClick(info) {
            console.log('onRightClick', info);
        }
    }, {
        key: 'render',
        value: function render() {
            return React.createElement(
                _next.Tree,
                { checkable: true, editable: true,
                    defaultExpandedKeys: ['2'],
                    defaultCheckedKeys: ['2', '4', '5'],
                    onSelect: this.onSelect,
                    onCheck: this.onCheck,
                    onEditFinish: this.onEditFinish,
                    onRightClick: this.onRightClick },
                React.createElement(
                    TreeNode,
                    { key: '1', label: 'Component' },
                    React.createElement(
                        TreeNode,
                        { key: '2', label: 'Form', selectable: false },
                        React.createElement(TreeNode, { key: '4', label: 'Input' }),
                        React.createElement(TreeNode, { key: '5', label: 'Select', disabled: true })
                    ),
                    React.createElement(
                        TreeNode,
                        { key: '3', label: 'Display' },
                        React.createElement(TreeNode, { key: '6', label: 'Table' })
                    )
                )
            );
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Tree } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> TreeNode = Tree.Node;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    onSelect(keys, info) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onSelect'</span>, keys, info);
    }

    onCheck(keys, info) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onCheck'</span>, keys, info);
    }

    onEditFinish(key, label, node) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onEditFinish'</span>, key, label, node);
    }

    onRightClick(info) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onRightClick'</span>, info);
    }

    render() {
        <span class="hljs-keyword">return</span> (
            &lt;Tree checkable editable
                defaultExpandedKeys={['2']}
                defaultCheckedKeys={['2', '4', '5']}
                onSelect={this.onSelect}
                onCheck={this.onCheck}
                onEditFinish={this.onEditFinish}
                onRightClick={this.onRightClick}&gt;
                &lt;TreeNode key="1" label="Component"&gt;
                    &lt;TreeNode key="2" label="Form" selectable={false}&gt;
                        &lt;TreeNode key="4" label="Input" /&gt;
                        &lt;TreeNode key="5" label="Select" disabled /&gt;
                    &lt;/TreeNode&gt;
                    &lt;TreeNode key="3" label="Display"&gt;
                        &lt;TreeNode key="6" label="Table" /&gt;
                    &lt;/TreeNode&gt;
                &lt;/TreeNode&gt;
            &lt;/Tree&gt;
        );
    }
}

ReactDOM.render(&lt;Demo /&gt;, mountNode);</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>最简单的用法，展示可展开，可选中，可勾选，可编辑，可右键，禁用，禁用勾选，默认展开，默认选中，默认勾选等功能。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="tree-3">
      <div class="demo-list-item-header">
        <a href="#tree-3" class="title">使用数据直接生成</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-tree-3"></div>
          <script>var mountNode = document.getElementById('react-app-tree-3');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var data = [{
    label: 'Component',
    key: '1',
    children: [{
        label: 'Form',
        key: '2',
        selectable: false,
        children: [{
            label: 'Input',
            key: '4'
        }, {
            label: 'Select',
            key: '5',
            disabled: true
        }]
    }, {
        label: 'Display',
        key: '3',
        children: [{
            label: 'Table',
            key: '6'
        }]
    }]
}];

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo() {
        _classCallCheck(this, Demo);

        return _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).apply(this, arguments));
    }

    _createClass(Demo, [{
        key: 'onSelect',
        value: function onSelect(keys, info) {
            console.log('onSelect', keys, info);
        }
    }, {
        key: 'onCheck',
        value: function onCheck(keys, info) {
            console.log('onCheck', keys, info);
        }
    }, {
        key: 'onEditFinish',
        value: function onEditFinish(key, label, node) {
            console.log('onEditFinish', key, label, node);
        }
    }, {
        key: 'onRightClick',
        value: function onRightClick(info) {
            console.log('onRightClick', info);
        }
    }, {
        key: 'render',
        value: function render() {
            return React.createElement(_next.Tree, { checkable: true, editable: true,
                defaultExpandedKeys: ['2'],
                defaultCheckedKeys: ['2', '4', '5'],
                onSelect: this.onSelect,
                onCheck: this.onCheck,
                onEditFinish: this.onEditFinish,
                onRightClick: this.onRightClick,
                dataSource: data });
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Tree } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> data = [{
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Component'</span>,
    <span class="hljs-attr">key</span>: <span class="hljs-string">'1'</span>,
    <span class="hljs-attr">children</span>: [{
        <span class="hljs-attr">label</span>: <span class="hljs-string">'Form'</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">'2'</span>,
        <span class="hljs-attr">selectable</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">children</span>: [{
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Input'</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">'4'</span>
        }, {
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Select'</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">'5'</span>,
            <span class="hljs-attr">disabled</span>: <span class="hljs-literal">true</span>
        }]
    }, {
        <span class="hljs-attr">label</span>: <span class="hljs-string">'Display'</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">'3'</span>,
        <span class="hljs-attr">children</span>: [{
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Table'</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">'6'</span>
        }]
    }]
}];

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    onSelect(keys, info) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onSelect'</span>, keys, info);
    }

    onCheck(keys, info) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onCheck'</span>, keys, info);
    }

    onEditFinish(key, label, node) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onEditFinish'</span>, key, label, node);
    }

    onRightClick(info) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onRightClick'</span>, info);
    }

    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tree</span> <span class="hljs-attr">checkable</span> <span class="hljs-attr">editable</span>
                <span class="hljs-attr">defaultExpandedKeys</span>=<span class="hljs-string">{[</span>'<span class="hljs-attr">2</span>']}
                <span class="hljs-attr">defaultCheckedKeys</span>=<span class="hljs-string">{[</span>'<span class="hljs-attr">2</span>', '<span class="hljs-attr">4</span>', '<span class="hljs-attr">5</span>']}
                <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{this.onSelect}</span>
                <span class="hljs-attr">onCheck</span>=<span class="hljs-string">{this.onCheck}</span>
                <span class="hljs-attr">onEditFinish</span>=<span class="hljs-string">{this.onEditFinish}</span>
                <span class="hljs-attr">onRightClick</span>=<span class="hljs-string">{this.onRightClick}</span>
                <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{data}</span> /&gt;</span>
        );
    }
}

ReactDOM.render(<span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span>, mountNode);</span></code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>使用 dataSource 生成树结构，除设置 key, label, children 属性外，还可传入 TreeNode 的其他属性，包括 selectable，disabled，checkable, checkboxDisabled, isLeaf 等。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="tree-6">
      <div class="demo-list-item-header">
        <a href="#tree-6" class="title">带线样式</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-tree-6"></div>
          <script>var mountNode = document.getElementById('react-app-tree-6');</script> <script>(function(){"use strict";

var _next = require("@alife/next");

var TreeNode = _next.Tree.Node;

ReactDOM.render(React.createElement(
    _next.Tree,
    { defaultExpandAll: true, showLine: true },
    React.createElement(
        TreeNode,
        { label: "Trunk" },
        React.createElement(
            TreeNode,
            { label: "Branch" },
            React.createElement(
                TreeNode,
                { label: "Branch" },
                React.createElement(TreeNode, { label: "Leaf" })
            ),
            React.createElement(TreeNode, { label: "Leaf" })
        ),
        React.createElement(
            TreeNode,
            { label: "Branch" },
            React.createElement(TreeNode, { label: "Leaf" }),
            React.createElement(TreeNode, { label: "Leaf" })
        )
    )
), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Tree } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> TreeNode = Tree.Node;

ReactDOM.render(
    &lt;Tree defaultExpandAll showLine&gt;
        &lt;TreeNode label="Trunk"&gt;
            &lt;TreeNode label="Branch"&gt;
                &lt;TreeNode label="Branch"&gt;
                    &lt;TreeNode label="Leaf" /&gt;
                &lt;/TreeNode&gt;
                &lt;TreeNode label="Leaf" /&gt;
            &lt;/TreeNode&gt;
            &lt;TreeNode label="Branch"&gt;
                &lt;TreeNode label="Leaf" /&gt;
                &lt;TreeNode label="Leaf" /&gt;
            &lt;/TreeNode&gt;
        &lt;/TreeNode&gt;
    &lt;/Tree&gt;, mountNode);</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>展示Tree组件带线的样式外观。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="tree-7">
      <div class="demo-list-item-header">
        <a href="#tree-7" class="title">树节点占满一行</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-tree-7"></div>
          <script>var mountNode = document.getElementById('react-app-tree-7');</script> <script>(function(){'use strict';

var _next = require('@alife/next');

var TreeNode = _next.Tree.Node;

ReactDOM.render(React.createElement(
    _next.Tree,
    { defaultExpandAll: true, isNodeBlock: { defaultPaddingLeft: 50 }, defaultSelectedKeys: ['1'], style: { width: '300px' } },
    React.createElement(
        TreeNode,
        { label: 'Component', key: '0' },
        React.createElement(
            TreeNode,
            { label: 'Form', key: '1', disabled: true },
            React.createElement(
                TreeNode,
                { label: 'Select', key: '2' },
                React.createElement(TreeNode, { label: 'TreeSelect', key: '3' })
            ),
            React.createElement(TreeNode, { label: 'Input', key: '4' })
        ),
        React.createElement(
            TreeNode,
            { label: 'Display', key: '5' },
            React.createElement(TreeNode, { label: 'Card', key: '6' }),
            React.createElement(TreeNode, { label: 'Table', key: '7' })
        )
    )
), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Tree } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> TreeNode = Tree.Node;

ReactDOM.render(
    &lt;Tree defaultExpandAll isNodeBlock={{ defaultPaddingLeft: 50 }} defaultSelectedKeys={['1']} style={{ width: '300px' }}&gt;
        &lt;TreeNode label="Component" key="0"&gt;
            &lt;TreeNode label="Form" key="1" disabled&gt;
                &lt;TreeNode label="Select" key="2"&gt;
                    &lt;TreeNode label="TreeSelect" key="3" /&gt;
                &lt;/TreeNode&gt;
                &lt;TreeNode label="Input" key="4" /&gt;
            &lt;/TreeNode&gt;
            &lt;TreeNode label="Display" key="5"&gt;
                &lt;TreeNode label="Card" key="6" /&gt;
                &lt;TreeNode label="Table" key="7" /&gt;
            &lt;/TreeNode&gt;
        &lt;/TreeNode&gt;
    &lt;/Tree&gt;, mountNode);</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>可以通过设置 isNodeBlock 为 true，来让树节点占满一行，isNodeBlock 也可传入一个对象，支持设置 defaultPaddingLeft（默认的左内边距）和 indent （缩进距离），另外注意 showLine 在开启 isNodeBlock 时失效。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="tree-2">
      <div class="demo-list-item-header">
        <a href="#tree-2" class="title">单选与多选</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-tree-2"></div>
          <script>var mountNode = document.getElementById('react-app-tree-2');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var data = [{
    key: '0-0',
    label: '0-0',
    children: [{
        key: '0-0-0',
        label: '0-0-0',
        children: [{
            key: '0-0-0-0',
            label: '0-0-0-0',
            children: [{
                key: '0-0-0-0-0',
                label: '0-0-0-0-0'
            }]
        }, {
            key: '0-0-0-1',
            label: '0-0-0-1'
        }]
    }, {
        key: '0-0-1',
        label: '0-0-1',
        children: [{
            key: '0-0-1-0',
            label: '0-0-1-0'
        }, {
            key: '0-0-1-1',
            label: '0-0-1-1'
        }]
    }]
}];

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo(props) {
        _classCallCheck(this, Demo);

        var _this = _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).call(this, props));

        _this.state = {
            selectedKeys: [],
            multiple: false
        };
        _this.handleSelect = _this.handleSelect.bind(_this);
        _this.handleCheck = _this.handleCheck.bind(_this);
        return _this;
    }

    _createClass(Demo, [{
        key: 'handleSelect',
        value: function handleSelect(keys, info) {
            console.log(keys, info);

            this.setState({
                selectedKeys: keys
            });
        }
    }, {
        key: 'handleCheck',
        value: function handleCheck() {
            this.setState({
                multiple: !this.state.multiple,
                selectedKeys: []
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var _state = this.state,
                multiple = _state.multiple,
                selectedKeys = _state.selectedKeys;


            return React.createElement(
                'div',
                { className: 'control-select-demo' },
                React.createElement(
                    'label',
                    { className: 'multiple-check' },
                    React.createElement(_next.Checkbox, { value: multiple, onChange: this.handleCheck }),
                    React.createElement(
                        'span',
                        { className: 'multiple-text' },
                        'Enable multiple'
                    )
                ),
                React.createElement(_next.Tree, { defaultExpandAll: true, multiple: multiple, selectedKeys: selectedKeys, onSelect: this.handleSelect, dataSource: data })
            );
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Checkbox, Tree } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> data = [{
    <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0'</span>,
    <span class="hljs-attr">children</span>: [{
        <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-0'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-0'</span>,
        <span class="hljs-attr">children</span>: [{
            <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-0-0'</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-0-0'</span>,
            <span class="hljs-attr">children</span>: [{
                <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-0-0-0'</span>,
                <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-0-0-0'</span>
            }]
        }, {
            <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-0-1'</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-0-1'</span>
        }]
    }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-1'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-1'</span>,
        <span class="hljs-attr">children</span>: [{
            <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-1-0'</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-1-0'</span>
        }, {
            <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-1-1'</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-1-1'</span>
        }]
    }]
}];

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);

        <span class="hljs-keyword">this</span>.state = {
            <span class="hljs-attr">selectedKeys</span>: [],
            <span class="hljs-attr">multiple</span>: <span class="hljs-literal">false</span>
        };
        <span class="hljs-keyword">this</span>.handleSelect = <span class="hljs-keyword">this</span>.handleSelect.bind(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">this</span>.handleCheck = <span class="hljs-keyword">this</span>.handleCheck.bind(<span class="hljs-keyword">this</span>);
    }

    handleSelect(keys, info) {
        <span class="hljs-built_in">console</span>.log(keys, info);

        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">selectedKeys</span>: keys
        });
    }

    handleCheck() {
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">multiple</span>: !<span class="hljs-keyword">this</span>.state.multiple,
            <span class="hljs-attr">selectedKeys</span>: []
        });
    }

    render() {
        <span class="hljs-keyword">const</span> { multiple, selectedKeys } = <span class="hljs-keyword">this</span>.state;

        <span class="hljs-keyword">return</span> (
            &lt;div className="control-select-demo"&gt;
                &lt;label className="multiple-check"&gt;
                    &lt;Checkbox value={multiple} onChange={this.handleCheck} /&gt;
                    &lt;span className="multiple-text"&gt;Enable multiple&lt;/span&gt;
                &lt;/label&gt;
                &lt;Tree defaultExpandAll multiple={multiple} selectedKeys={selectedKeys} onSelect={this.handleSelect} dataSource={data} /&gt;
          &lt;/div&gt;
        );
    }
}

ReactDOM.render(&lt;Demo /&gt;, mountNode);</code></pre></div><style type="text/css">.control-select-demo .multiple-check {
    display: block;
    margin-bottom: 10px;
}

.control-select-demo .multiple-text {
    display: inline-block;
    margin-left: 10px;
    vertical-align: middle;
    color: #666;
    font-size: 14px;
}</style><div class="highlight"><pre><code class="css"><span class="hljs-selector-class">.control-select-demo</span> <span class="hljs-selector-class">.multiple-check</span> {
    <span class="hljs-attribute">display</span>: block;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.control-select-demo</span> <span class="hljs-selector-class">.multiple-text</span> {
    <span class="hljs-attribute">display</span>: inline-block;
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">vertical-align</span>: middle;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>展示单选与多选的用法。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="tree-1">
      <div class="demo-list-item-header">
        <a href="#tree-1" class="title">父子节点选中是否关联</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-tree-1"></div>
          <script>var mountNode = document.getElementById('react-app-tree-1');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var data = [{
    key: '0-0',
    label: '0-0',
    children: [{
        key: '0-0-0',
        label: '0-0-0',
        children: [{
            key: '0-0-0-0',
            label: '0-0-0-0',
            children: [{
                key: '0-0-0-0-0',
                label: '0-0-0-0-0'
            }]
        }, {
            key: '0-0-0-1',
            label: '0-0-0-1'
        }]
    }, {
        key: '0-0-1',
        label: '0-0-1',
        children: [{
            key: '0-0-1-0',
            label: '0-0-1-0'
        }, {
            key: '0-0-1-1',
            label: '0-0-1-1'
        }]
    }]
}];

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo(props) {
        _classCallCheck(this, Demo);

        var _this = _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).call(this, props));

        _this.state = {
            checkedKeys: [],
            checkStrictly: false
        };
        _this.handleCheck = _this.handleCheck.bind(_this);
        _this.handleCheckStrictly = _this.handleCheckStrictly.bind(_this);
        return _this;
    }

    _createClass(Demo, [{
        key: 'handleCheck',
        value: function handleCheck(keys, info) {
            console.log(keys, info);

            this.setState({
                checkedKeys: keys
            });
        }
    }, {
        key: 'handleCheckStrictly',
        value: function handleCheckStrictly() {
            this.setState({
                checkStrictly: !this.state.checkStrictly,
                checkedKeys: []
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var _state = this.state,
                checkedKeys = _state.checkedKeys,
                checkStrictly = _state.checkStrictly;


            return React.createElement(
                'div',
                { className: 'control-check-demo' },
                React.createElement(
                    'label',
                    { className: 'strictly-check' },
                    React.createElement(_next.Checkbox, { value: checkStrictly, onChange: this.handleCheckStrictly }),
                    React.createElement(
                        'span',
                        { className: 'strictly-text' },
                        'Enable checkStrictly'
                    )
                ),
                React.createElement(_next.Tree, { defaultExpandAll: true, checkable: true, checkStrictly: checkStrictly, checkedKeys: checkedKeys, onCheck: this.handleCheck, dataSource: data })
            );
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Checkbox, Tree } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> data = [{
    <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0'</span>,
    <span class="hljs-attr">children</span>: [{
        <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-0'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-0'</span>,
        <span class="hljs-attr">children</span>: [{
            <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-0-0'</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-0-0'</span>,
            <span class="hljs-attr">children</span>: [{
                <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-0-0-0'</span>,
                <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-0-0-0'</span>
            }]
        }, {
            <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-0-1'</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-0-1'</span>
        }]
    }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-1'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-1'</span>,
        <span class="hljs-attr">children</span>: [{
            <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-1-0'</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-1-0'</span>
        }, {
            <span class="hljs-attr">key</span>: <span class="hljs-string">'0-0-1-1'</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'0-0-1-1'</span>
        }]
    }]
}];

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);

        <span class="hljs-keyword">this</span>.state = {
            <span class="hljs-attr">checkedKeys</span>: [],
            <span class="hljs-attr">checkStrictly</span>: <span class="hljs-literal">false</span>
        };
        <span class="hljs-keyword">this</span>.handleCheck = <span class="hljs-keyword">this</span>.handleCheck.bind(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">this</span>.handleCheckStrictly = <span class="hljs-keyword">this</span>.handleCheckStrictly.bind(<span class="hljs-keyword">this</span>);
    }

    handleCheck(keys, info) {
        <span class="hljs-built_in">console</span>.log(keys, info);

        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">checkedKeys</span>: keys
        });
    }

    handleCheckStrictly() {
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">checkStrictly</span>: !<span class="hljs-keyword">this</span>.state.checkStrictly,
            <span class="hljs-attr">checkedKeys</span>: []
        });
    }

    render() {
        <span class="hljs-keyword">const</span> { checkedKeys, checkStrictly } = <span class="hljs-keyword">this</span>.state;

        <span class="hljs-keyword">return</span> (
            &lt;div className="control-check-demo"&gt;
                &lt;label className="strictly-check"&gt;
                    &lt;Checkbox value={checkStrictly} onChange={this.handleCheckStrictly} /&gt;
                    &lt;span className="strictly-text"&gt;Enable checkStrictly&lt;/span&gt;
                &lt;/label&gt;
                &lt;Tree defaultExpandAll checkable checkStrictly={checkStrictly} checkedKeys={checkedKeys} onCheck={this.handleCheck} dataSource={data} /&gt;
            &lt;/div&gt;
        );
    }
}

ReactDOM.render(&lt;Demo /&gt;, mountNode);</code></pre></div><style type="text/css">.control-check-demo .strictly-check {
    display: block;
    margin-bottom: 10px;
}

.control-check-demo .strictly-text {
    display: inline-block;
    margin-left: 10px;
    vertical-align: middle;
    color: #666;
    font-size: 14px;
}</style><div class="highlight"><pre><code class="css"><span class="hljs-selector-class">.control-check-demo</span> <span class="hljs-selector-class">.strictly-check</span> {
    <span class="hljs-attribute">display</span>: block;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.control-check-demo</span> <span class="hljs-selector-class">.strictly-text</span> {
    <span class="hljs-attribute">display</span>: inline-block;
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">vertical-align</span>: middle;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>展示父子节点选中是否关联的用法。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="tree-8">
      <div class="demo-list-item-header">
        <a href="#tree-8" class="title">可搜索的树</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-tree-8"></div>
          <script>var mountNode = document.getElementById('react-app-tree-8');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var data = [{
    label: 'Component',
    key: '1',
    children: [{
        label: 'Form',
        key: '2',
        children: [{
            label: 'Input',
            key: '4'
        }, {
            label: 'Select',
            key: '5'
        }]
    }, {
        label: 'Display',
        key: '3',
        children: [{
            label: 'Table',
            key: '6'
        }]
    }]
}];

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo(props) {
        _classCallCheck(this, Demo);

        var _this = _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).call(this, props));

        _this.state = {
            expandedKeys: ['2'],
            autoExpandParent: true
        };
        _this.matchedKeys = [];
        _this.handleSearch = _this.handleSearch.bind(_this);
        _this.handleExpand = _this.handleExpand.bind(_this);
        return _this;
    }

    _createClass(Demo, [{
        key: 'handleSearch',
        value: function handleSearch(value) {
            value = value.trim();
            if (!value) {
                this.matchedKeys = null;
                return;
            }

            var matchedKeys = [];
            var loop = function loop(data) {
                return data.forEach(function (item) {
                    if (item.label.indexOf(value) > -1) {
                        matchedKeys.push(item.key);
                    }
                    if (item.children && item.children.length) {
                        loop(item.children);
                    }
                });
            };
            loop(data);

            this.setState({
                expandedKeys: [].concat(matchedKeys),
                autoExpandParent: true
            });
            this.matchedKeys = matchedKeys;
        }
    }, {
        key: 'handleExpand',
        value: function handleExpand(keys) {
            this.setState({
                expandedKeys: keys,
                autoExpandParent: false
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this2 = this;

            var _state = this.state,
                expandedKeys = _state.expandedKeys,
                autoExpandParent = _state.autoExpandParent;

            var filterTreeNode = function filterTreeNode(node) {
                return _this2.matchedKeys && _this2.matchedKeys.indexOf(node.props.eventKey) > -1;
            };

            return React.createElement(
                'div',
                null,
                React.createElement(_next.Search, { shape: 'simple', size: 'medium', style: { width: '200px', marginBottom: '10px' }, onChange: this.handleSearch }),
                React.createElement(_next.Tree, { expandedKeys: expandedKeys, autoExpandParent: autoExpandParent, filterTreeNode: filterTreeNode, onExpand: this.handleExpand, dataSource: data })
            );
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Search, Tree } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> data = [{
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Component'</span>,
    <span class="hljs-attr">key</span>: <span class="hljs-string">'1'</span>,
    <span class="hljs-attr">children</span>: [{
        <span class="hljs-attr">label</span>: <span class="hljs-string">'Form'</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">'2'</span>,
        <span class="hljs-attr">children</span>: [{
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Input'</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">'4'</span>
        }, {
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Select'</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">'5'</span>
        }]
    }, {
        <span class="hljs-attr">label</span>: <span class="hljs-string">'Display'</span>,
        <span class="hljs-attr">key</span>: <span class="hljs-string">'3'</span>,
        <span class="hljs-attr">children</span>: [{
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Table'</span>,
            <span class="hljs-attr">key</span>: <span class="hljs-string">'6'</span>
        }]
    }]
}];

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);

        <span class="hljs-keyword">this</span>.state = {
            <span class="hljs-attr">expandedKeys</span>: [<span class="hljs-string">'2'</span>],
            <span class="hljs-attr">autoExpandParent</span>: <span class="hljs-literal">true</span>
        };
        <span class="hljs-keyword">this</span>.matchedKeys = [];
        <span class="hljs-keyword">this</span>.handleSearch = <span class="hljs-keyword">this</span>.handleSearch.bind(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">this</span>.handleExpand = <span class="hljs-keyword">this</span>.handleExpand.bind(<span class="hljs-keyword">this</span>);
    }

    handleSearch(value) {
        value = value.trim();
        <span class="hljs-keyword">if</span> (!value) {
            <span class="hljs-keyword">this</span>.matchedKeys = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">const</span> matchedKeys = [];
        <span class="hljs-keyword">const</span> loop = <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> data.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (item.label.indexOf(value) &gt; <span class="hljs-number">-1</span>) {
                matchedKeys.push(item.key);
            }
            <span class="hljs-keyword">if</span> (item.children &amp;&amp; item.children.length) {
                loop(item.children);
            }
        });
        loop(data);

        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">expandedKeys</span>: [...matchedKeys],
            <span class="hljs-attr">autoExpandParent</span>: <span class="hljs-literal">true</span>
        });
        <span class="hljs-keyword">this</span>.matchedKeys = matchedKeys;
    }

    handleExpand(keys) {
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">expandedKeys</span>: keys,
            <span class="hljs-attr">autoExpandParent</span>: <span class="hljs-literal">false</span>
        });
    }

    render() {
        <span class="hljs-keyword">const</span> { expandedKeys, autoExpandParent } = <span class="hljs-keyword">this</span>.state;
        <span class="hljs-keyword">const</span> filterTreeNode = <span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.matchedKeys &amp;&amp; <span class="hljs-keyword">this</span>.matchedKeys.indexOf(node.props.eventKey) &gt; <span class="hljs-number">-1</span>;
        };

        <span class="hljs-keyword">return</span> (
            &lt;div&gt;
                &lt;Search shape="simple" size="medium" style={{ width: '200px', marginBottom: '10px' }} onChange={this.handleSearch} /&gt;
                &lt;Tree expandedKeys={expandedKeys} autoExpandParent={autoExpandParent} filterTreeNode={filterTreeNode} onExpand={this.handleExpand} dataSource={data} /&gt;
          &lt;/div&gt;
        );
    }
}

ReactDOM.render(&lt;Demo /&gt;, mountNode);</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>展示可搜索的树。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="tree-5">
      <div class="demo-list-item-header">
        <a href="#tree-5" class="title">异步加载数据</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-tree-5"></div>
          <script>var mountNode = document.getElementById('react-app-tree-5');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo(props) {
        _classCallCheck(this, Demo);

        var _this = _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).call(this, props));

        _this.state = {
            data: [{ label: 'Expand to load', key: '0' }, { label: 'Expand to load', key: '1' }, { label: 'Leaf', key: '2', isLeaf: true }]
        };

        _this.onLoadData = _this.onLoadData.bind(_this);
        return _this;
    }

    _createClass(Demo, [{
        key: 'onLoadData',
        value: function onLoadData(node) {
            var _this2 = this;

            return new Promise(function (resolve) {
                if (node.props.children) {
                    return resolve();
                }

                var _node$props = node.props,
                    eventKey = _node$props.eventKey,
                    pos = _node$props.pos;

                var item = _this2.getItemByPos(pos);
                setTimeout(function () {
                    item.children = [{ label: 'Child Tree', key: eventKey + '-0' }, { label: 'Child Tree', key: eventKey + '-1' }];
                    _this2.setState({
                        data: [].concat(_toConsumableArray(_this2.state.data))
                    });
                    resolve();
                }, 1000);
            });
        }
    }, {
        key: 'getItemByPos',
        value: function getItemByPos(pos) {
            return pos.split('-').slice(1).reduce(function (ret, num) {
                return ret.children[num];
            }, { children: this.state.data });
        }
    }, {
        key: 'render',
        value: function render() {
            return React.createElement(_next.Tree, { dataSource: this.state.data, loadData: this.onLoadData });
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Tree } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);

        <span class="hljs-keyword">this</span>.state = {
            <span class="hljs-attr">data</span>: [
                { <span class="hljs-attr">label</span>: <span class="hljs-string">'Expand to load'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'0'</span>, },
                { <span class="hljs-attr">label</span>: <span class="hljs-string">'Expand to load'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'1'</span> },
                { <span class="hljs-attr">label</span>: <span class="hljs-string">'Leaf'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'2'</span>, <span class="hljs-attr">isLeaf</span>: <span class="hljs-literal">true</span> }
            ]
        };

        <span class="hljs-keyword">this</span>.onLoadData = <span class="hljs-keyword">this</span>.onLoadData.bind(<span class="hljs-keyword">this</span>);
    }

    onLoadData(node) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (node.props.children) {
                <span class="hljs-keyword">return</span> resolve();
            }

            <span class="hljs-keyword">const</span> { eventKey, pos } = node.props;
            <span class="hljs-keyword">const</span> item = <span class="hljs-keyword">this</span>.getItemByPos(pos);
            setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                item.children = [
                    { <span class="hljs-attr">label</span>: <span class="hljs-string">'Child Tree'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">`<span class="hljs-subst">${eventKey}</span>-0`</span> },
                    { <span class="hljs-attr">label</span>: <span class="hljs-string">'Child Tree'</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">`<span class="hljs-subst">${eventKey}</span>-1`</span> }
                ];
                <span class="hljs-keyword">this</span>.setState({
                    <span class="hljs-attr">data</span>: [...this.state.data]
                });
                resolve();
            }, <span class="hljs-number">1000</span>);
        });
    }

    getItemByPos(pos) {
        <span class="hljs-keyword">return</span> pos.split(<span class="hljs-string">'-'</span>).slice(<span class="hljs-number">1</span>).reduce(<span class="hljs-function">(<span class="hljs-params">ret, num</span>) =&gt;</span> ret.children[num], { <span class="hljs-attr">children</span>: <span class="hljs-keyword">this</span>.state.data });
    }

    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tree</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{this.state.data}</span> <span class="hljs-attr">loadData</span>=<span class="hljs-string">{this.onLoadData}</span> /&gt;</span>
        );
    }
}

ReactDOM.render(<span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span>, mountNode);</span></code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>点击展开节点，动态加载数据。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="tree-4">
      <div class="demo-list-item-header">
        <a href="#tree-4" class="title">拖动</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-tree-4"></div>
          <script>var mountNode = document.getElementById('react-app-tree-4');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TreeNode = _next.Tree.Node;

var x = 3;
var y = 2;
var z = 1;
var gData = [];

var generateData = function generateData(_level, _preKey, _tns) {
    var preKey = _preKey || '0';
    var tns = _tns || gData;

    var children = [];
    for (var i = 0; i < x; i++) {
        var key = preKey + '-' + i;
        tns.push({ label: key, key: key });
        if (i < y) {
            children.push(key);
        }
    }
    if (_level < 0) {
        return tns;
    }
    var level = _level - 1;
    children.forEach(function (key, index) {
        tns[index].children = [];
        return generateData(level, key, tns[index].children);
    });
};
generateData(z);

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo(props) {
        _classCallCheck(this, Demo);

        var _this = _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).call(this, props));

        _this.state = {
            gData: gData
        };
        return _this;
    }

    _createClass(Demo, [{
        key: 'onDrop',
        value: function onDrop(info) {
            var dragKey = info.dragNode.props.eventKey;
            var dropKey = info.node.props.eventKey;
            var dropPosition = info.dropPosition;
            var loop = function loop(data, key, callback) {
                data.forEach(function (item, index, arr) {
                    if (item.key === key) {
                        return callback(item, index, arr);
                    }
                    if (item.children) {
                        return loop(item.children, key, callback);
                    }
                });
            };
            var data = [].concat(_toConsumableArray(this.state.gData));
            var dragObj = void 0;
            loop(data, dragKey, function (item, index, arr) {
                arr.splice(index, 1);
                dragObj = item;
            });
            if (info.dropPosition === 0) {
                loop(data, dropKey, function (item) {
                    item.children = item.children || [];
                    item.children.push(dragObj);
                });
            } else {
                var ar = void 0;
                var i = void 0;
                loop(data, dropKey, function (item, index, arr) {
                    ar = arr;
                    i = index;
                });
                if (dropPosition === -1) {
                    ar.splice(i, 0, dragObj);
                } else {
                    ar.splice(i + 1, 0, dragObj);
                }
            }
            this.setState({
                gData: data
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var loop = function loop(data) {
                return data.map(function (item) {
                    if (item.children) {
                        return React.createElement(
                            TreeNode,
                            { key: item.key, label: item.key },
                            loop(item.children)
                        );
                    }
                    return React.createElement(TreeNode, { key: item.key, label: item.key });
                });
            };

            return React.createElement(
                _next.Tree,
                { draggable: true, selectable: false, isLabelBlock: true, defaultExpandedKeys: ['0-0', '0-0-0', '0-0-0-0'], onDrop: this.onDrop.bind(this) },
                loop(this.state.gData)
            );
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Tree } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-keyword">const</span> TreeNode = Tree.Node;

<span class="hljs-keyword">const</span> x = <span class="hljs-number">3</span>;
<span class="hljs-keyword">const</span> y = <span class="hljs-number">2</span>;
<span class="hljs-keyword">const</span> z = <span class="hljs-number">1</span>;
<span class="hljs-keyword">const</span> gData = [];

<span class="hljs-keyword">const</span> generateData = <span class="hljs-function">(<span class="hljs-params">_level, _preKey, _tns</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> preKey = _preKey || <span class="hljs-string">'0'</span>;
    <span class="hljs-keyword">const</span> tns = _tns || gData;

    <span class="hljs-keyword">const</span> children = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; x; i++) {
        <span class="hljs-keyword">const</span> key = <span class="hljs-string">`<span class="hljs-subst">${preKey}</span>-<span class="hljs-subst">${i}</span>`</span>;
        tns.push({ <span class="hljs-attr">label</span>: key, key });
        <span class="hljs-keyword">if</span> (i &lt; y) {
            children.push(key);
        }
    }
    <span class="hljs-keyword">if</span> (_level &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> tns;
    }
    <span class="hljs-keyword">const</span> level = _level - <span class="hljs-number">1</span>;
    children.forEach(<span class="hljs-function">(<span class="hljs-params">key, index</span>) =&gt;</span> {
        tns[index].children = [];
        <span class="hljs-keyword">return</span> generateData(level, key, tns[index].children);
    });
};
generateData(z);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);

        <span class="hljs-keyword">this</span>.state = {
            gData
        };
    }

    onDrop(info) {
        <span class="hljs-keyword">const</span> dragKey = info.dragNode.props.eventKey;
        <span class="hljs-keyword">const</span> dropKey = info.node.props.eventKey;
        <span class="hljs-keyword">const</span> dropPosition = info.dropPosition;
        <span class="hljs-keyword">const</span> loop = <span class="hljs-function">(<span class="hljs-params">data, key, callback</span>) =&gt;</span> {
            data.forEach(<span class="hljs-function">(<span class="hljs-params">item, index, arr</span>) =&gt;</span> {
                <span class="hljs-keyword">if</span> (item.key === key) {
                    <span class="hljs-keyword">return</span> callback(item, index, arr);
                }
                <span class="hljs-keyword">if</span> (item.children) {
                    <span class="hljs-keyword">return</span> loop(item.children, key, callback);
                }
            });
        };
        <span class="hljs-keyword">const</span> data = [...this.state.gData];
        <span class="hljs-keyword">let</span> dragObj;
        loop(data, dragKey, (item, index, arr) =&gt; {
            arr.splice(index, <span class="hljs-number">1</span>);
            dragObj = item;
        });
        <span class="hljs-keyword">if</span> (info.dropPosition === <span class="hljs-number">0</span>) {
            loop(data, dropKey, (item) =&gt; {
                item.children = item.children || [];
                item.children.push(dragObj);
            });
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">let</span> ar;
            <span class="hljs-keyword">let</span> i;
            loop(data, dropKey, (item, index, arr) =&gt; {
                ar = arr;
                i = index;
            });
            <span class="hljs-keyword">if</span> (dropPosition === <span class="hljs-number">-1</span>) {
                ar.splice(i, <span class="hljs-number">0</span>, dragObj);
            } <span class="hljs-keyword">else</span> {
                ar.splice(i + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, dragObj);
            }
        }
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">gData</span>: data,
        });
    }
    render() {
        <span class="hljs-keyword">const</span> loop = <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> data.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (item.children) {
                <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TreeNode</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.key}</span> <span class="hljs-attr">label</span>=<span class="hljs-string">{item.key}</span>&gt;</span>{loop(item.children)}<span class="hljs-tag">&lt;/<span class="hljs-name">TreeNode</span>&gt;</span></span>;
            }
            <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TreeNode</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.key}</span> <span class="hljs-attr">label</span>=<span class="hljs-string">{item.key}</span> /&gt;</span>;
        });

        return (
            <span class="hljs-tag">&lt;<span class="hljs-name">Tree</span> <span class="hljs-attr">draggable</span> <span class="hljs-attr">selectable</span>=<span class="hljs-string">{false}</span> <span class="hljs-attr">isLabelBlock</span> <span class="hljs-attr">defaultExpandedKeys</span>=<span class="hljs-string">{[</span>'<span class="hljs-attr">0-0</span>', '<span class="hljs-attr">0-0-0</span>', '<span class="hljs-attr">0-0-0-0</span>']} <span class="hljs-attr">onDrop</span>=<span class="hljs-string">{this.onDrop.bind(this)}</span>&gt;</span>
                {loop(this.state.gData)}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Tree</span>&gt;</span>
        );
    }
}

ReactDOM.render(<span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span>, mountNode);</span></code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>将节点拖拽到其他节点内部或前后。</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
  </div>
  <div class="demo-api">
    <div class="title">API</div>
    <div class="demo-api-body markdown" id="demo-api"></div>
  </div>
</div>

  <script src="./statics/common.js"></script>
  <script src="./statics/demo-util.js"></script>
</body>

</html>
