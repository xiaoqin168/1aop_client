

<!doctype html>
<html>

<head>
  <title>Animate</title>
  <meta charset="utf-8" />
  <meta name="description" content="Fusion Dev" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="./statics/TB1LG1yhMoQMeJjy0FoXXcShVXa-32-33.png" sizes="32x32">
  <link rel="stylesheet" href="./statics/style-demo.css"> 
<link rel="stylesheet" href="./statics/next.min.css"></link>

  <script src="./statics/react-16-2-0-react-development-js,react-16-2-0-react-dom-development-js,jquery-1-11-3-jquery-min.js"></script>
  <script src="./statics/prop-types.min.js"></script>
  <script src="./statics/moment-with-locales.min.js"></script>
</head>

<body><script>
with(document)with(body)with(insertBefore(createElement("script"),firstChild))setAttribute("exparams","category=&userid=&aplus&yunid=&&trid=0bbbeff215249006575274483e1a80&asid=AQAAAAAyI+RaPQciOgAAAACoaCuIDRYv2g==",id="tb-beacon-aplus",src=(location>"https"?"//g":"//g")+".alicdn.com/alilog/mlog/aplus_v2.js")
</script>

  
<script src="./statics/common-js,next.js"></script>
<script src="./statics/next-with-locales.min.js"></script>
<script>
  window.react = window.React;
  window['react-dom'] = window.ReactDOM;
  window['prop-types'] = window.PropTypes;
  window['@alife/next'] = window.Next;
  window.ConfigProvider = window.Next.ConfigProvider;
  window.customIcons = [];

  
  (function () {
    ConfigProvider.initLocales(window.Next.locales);
    var fusionLocale = 'en_US';
    ConfigProvider.setLanguage(fusionLocale === 'en_US' ? 'en-us' : 'zh-cn');
  })();
  
</script>

<div class="demo-wrapper pc">
  <div class="demo-index">
    <ul class="demo-index-list">
      
      <li class="demo-index-item">
        <a href="#demo-guide">Development Guide</a>
      </li>
      <li class="demo-index-item">
        <a href="#demo-list">Exapmles</a>
      </li>
       
      <li class="demo-index-item demo-index-item-sub">
        <a href="#animate-0">Basic</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#animate-2">Multiple child elements animation</a>
      </li>
      
      <li class="demo-index-item demo-index-item-sub">
        <a href="#animate-1">Expand and collapse animation</a>
      </li>
       
      <li class="demo-index-item">
        <a href="#demo-api">API</a>
      </li>
      
    </ul>
  </div>

  
  <div class="demo-header">
    <div class="title">
       Animate
    </div>
  </div>
  <div class="demo-guide markdown" id="demo-guide"><h2 id="guide">Guide<a href="#guide" class="anchor">#</a></h2><h3 id="when-to-use">When To Use<a href="#when-to-use" class="anchor">#</a></h3><p>Need to customize animation.</p>
<h2 id="api">API<a href="#api" class="anchor">#</a></h2><h3 id="animate">Animate<a href="#animate" class="anchor">#</a></h3><table>
<thead>
<tr>
<th>param</th>
<th>desc</th>
<th>type</th>
<th>default</th>
</tr>
</thead>
<tbody>
<tr>
<td>animation</td>
<td>animation class names</td>
<td>String/Object</td>
<td>-</td>
</tr>
<tr>
<td>animationAppear</td>
<td>whether the child elements performs animation when it is first mounted</td>
<td>Boolean</td>
<td>true</td>
</tr>
<tr>
<td>component</td>
<td>component wrapped child element</td>
<td>any</td>
<td>&#39;div&#39;</td>
</tr>
<tr>
<td>singleMode</td>
<td>whether there is only a single child element, if there is more than one child element, set it to false</td>
<td>Boolean</td>
<td>true</td>
</tr>
<tr>
<td>children</td>
<td>child elements</td>
<td>ReactElement/Array&lt;ReactElement&gt;</td>
<td>-</td>
</tr>
<tr>
<td>beforeAppear</td>
<td>triggered before performing the first mount animation<br><br><strong>signatures</strong>:<br>Function() =&gt; void</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>onAppear</td>
<td>triggered after adding the xxx-appear-active class name<br><br><strong>signatures</strong>:<br>Function(node: HTMLElement) =&gt; void<br><strong>params</strong>:<br><em>node</em>: {HTMLElement} animated dom element</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>afterAppear</td>
<td>triggered after performing the first mount animation<br><br><strong>signatures</strong>:<br>Function(node: HTMLElement) =&gt; void<br><strong>params</strong>:<br><em>node</em>: {HTMLElement} animated dom element</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>beforeEnter</td>
<td>triggered before performing the enter animation<br><br><strong>signatures</strong>:<br>Function(node: HTMLElement) =&gt; void<br><strong>params</strong>:<br><em>node</em>: {HTMLElement} animated dom element</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>onEnter</td>
<td>triggered after adding the xxx-enter-active class name<br><br><strong>signatures</strong>:<br>Function(node: HTMLElement) =&gt; void<br><strong>params</strong>:<br><em>node</em>: {HTMLElement} animated dom element</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>afterEnter</td>
<td>triggered after performing the enter animation<br><br><strong>signatures</strong>:<br>Function(node: HTMLElement) =&gt; void<br><strong>params</strong>:<br><em>node</em>: {HTMLElement} animated dom element</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>beforeLeave</td>
<td>triggered before performing the leave animation<br><br><strong>signatures</strong>:<br>Function(node: HTMLElement) =&gt; void<br><strong>params</strong>:<br><em>node</em>: {HTMLElement} animated dom element</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>onLeave</td>
<td>triggered after adding the xxx-leave-active class name<br><br><strong>signatures</strong>:<br>Function(node: HTMLElement) =&gt; void<br><strong>params</strong>:<br><em>node</em>: {HTMLElement} animated dom element</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
<tr>
<td>afterLeave</td>
<td>triggered after performing the leave animation<br><br><strong>signatures</strong>:<br>Function(node: HTMLElement) =&gt; void<br><strong>params</strong>:<br><em>node</em>: {HTMLElement} animated dom element</td>
<td>Function</td>
<td>() =&gt; {}</td>
</tr>
</tbody>
</table>
</div>
  

  <div class="demo-list" id="demo-list">
    
    <div class="demo-list-item" id="animate-0">
      <div class="demo-list-item-header">
        <a href="#animate-0" class="title">Basic</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-animate-0"></div>
          <script>var mountNode = document.getElementById('react-app-animate-0');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo(props) {
        _classCallCheck(this, Demo);

        var _this = _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).call(this, props));

        _this.state = { visible: true };
        _this.handleToggle = _this.handleToggle.bind(_this);
        return _this;
    }

    _createClass(Demo, [{
        key: 'handleToggle',
        value: function handleToggle() {
            this.setState({
                visible: !this.state.visible
            });
        }
    }, {
        key: 'render',
        value: function render() {
            return React.createElement(
                'div',
                null,
                React.createElement(
                    'button',
                    { onClick: this.handleToggle },
                    'Toggle visible'
                ),
                React.createElement(
                    _next.Animate,
                    { animation: {
                            enter: 'my-zoom-in',
                            leave: 'my-zoom-out'
                        } },
                    this.state.visible ? React.createElement(
                        'div',
                        { className: 'basic-demo' },
                        'Next Animate'
                    ) : null
                )
            );
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Animate } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);
        <span class="hljs-keyword">this</span>.state = { <span class="hljs-attr">visible</span>: <span class="hljs-literal">true</span> };
        <span class="hljs-keyword">this</span>.handleToggle = <span class="hljs-keyword">this</span>.handleToggle.bind(<span class="hljs-keyword">this</span>);
    }

    handleToggle() {
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">visible</span>: !<span class="hljs-keyword">this</span>.state.visible
        });
    }

    render() {
        <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleToggle}</span>&gt;</span>Toggle visible<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Animate</span> <span class="hljs-attr">animation</span>=<span class="hljs-string">{{</span>
                <span class="hljs-attr">enter:</span> '<span class="hljs-attr">my-zoom-in</span>',
                <span class="hljs-attr">leave:</span> '<span class="hljs-attr">my-zoom-out</span>'
            }}&gt;</span>
                {this.state.visible ?
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"basic-demo"</span>&gt;</span>Next Animate<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> :
                    null}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Animate</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
}

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span>, mountNode);</span></code></pre></div><style type="text/css">.basic-demo {
    font-size: 96px;
    text-align: center;
}

.my-zoom-in {
    opacity: 0;
}

.my-zoom-in-active {
    animation: my-zoom-in 500ms linear;
}

.my-zoom-out {
    opacity: 1;
}

.my-zoom-out-active {
    animation: my-zoom-out 500ms linear;
}

@keyframes my-zoom-in {
    from {
        opacity: 0;
        transform: scale3d(.3, .3, .3);
    }

    50% {
        opacity: 1;
    }

    to {
        opacity: 1;
    }
}

@keyframes my-zoom-out {
    from {
        opacity: 1;
    }

    50% {
        opacity: 0;
        transform: scale3d(.3, .3, .3);
    }

    to {
        opacity: 0;
    }
}</style><div class="highlight"><pre><code class="css"><span class="hljs-selector-class">.basic-demo</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">96px</span>;
    <span class="hljs-attribute">text-align</span>: center;
}

<span class="hljs-selector-class">.my-zoom-in</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.my-zoom-in-active</span> {
    <span class="hljs-attribute">animation</span>: my-zoom-in <span class="hljs-number">500ms</span> linear;
}

<span class="hljs-selector-class">.my-zoom-out</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-selector-class">.my-zoom-out-active</span> {
    <span class="hljs-attribute">animation</span>: my-zoom-out <span class="hljs-number">500ms</span> linear;
}

@<span class="hljs-keyword">keyframes</span> my-zoom-in {
    <span class="hljs-selector-tag">from</span> {
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale3d</span>(.3, .3, .3);
    }

    50% {
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    }

    <span class="hljs-selector-tag">to</span> {
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    }
}

@<span class="hljs-keyword">keyframes</span> my-zoom-out {
    <span class="hljs-selector-tag">from</span> {
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    }

    50% {
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale3d</span>(.3, .3, .3);
    }

    <span class="hljs-selector-tag">to</span> {
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
    }
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>Demo the enter and leave animation of a child element.</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="animate-2">
      <div class="demo-list-item-header">
        <a href="#animate-2" class="title">Multiple child elements animation</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-animate-2"></div>
          <script>var mountNode = document.getElementById('react-app-animate-2');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TodoList = function (_React$Component) {
    _inherits(TodoList, _React$Component);

    function TodoList(props) {
        _classCallCheck(this, TodoList);

        var _this = _possibleConstructorReturn(this, (TodoList.__proto__ || Object.getPrototypeOf(TodoList)).call(this, props));

        _this.state = { items: ['hello', 'world', 'click', 'me'] };
        return _this;
    }

    _createClass(TodoList, [{
        key: 'handleAdd',
        value: function handleAdd() {
            this.setState({
                items: [].concat(_toConsumableArray(this.state.items), [
                // eslint-disable-next-line
                prompt('Enter some text')])
            });
        }
    }, {
        key: 'handleRemove',
        value: function handleRemove(i) {
            var newItems = this.state.items.slice();
            newItems.splice(i, 1);
            this.setState({ items: newItems });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this2 = this;

            return React.createElement(
                'div',
                { className: 'totolist-container' },
                React.createElement(
                    _next.Animate,
                    { animationAppear: true, animation: 'fade', className: 'todo-list', singleMode: false,
                        beforeAppear: function beforeAppear() {
                            return console.log('before appear');
                        },
                        onAppear: function onAppear() {
                            return console.log('appear');
                        },
                        afterAppear: function afterAppear() {
                            return console.log('after appear');
                        },
                        beforeEnter: function beforeEnter() {
                            return console.log('before enter');
                        },
                        onEnter: function onEnter() {
                            return console.log('enter');
                        },
                        afterEnter: function afterEnter() {
                            return console.log('after enter');
                        },
                        beforeLeave: function beforeLeave() {
                            return console.log('before leave');
                        },
                        onLeave: function onLeave() {
                            return console.log('leave');
                        },
                        afterLeave: function afterLeave() {
                            return console.log('after leave');
                        } },
                    this.state.items.map(function (item, i) {
                        return React.createElement(
                            'div',
                            { key: item },
                            item,
                            React.createElement(
                                'button',
                                { onClick: function onClick() {
                                        return _this2.handleRemove(i);
                                    } },
                                '\xD7'
                            )
                        );
                    })
                ),
                React.createElement(
                    'button',
                    { onClick: function onClick() {
                            return _this2.handleAdd();
                        } },
                    'Add Item'
                )
            );
        }
    }]);

    return TodoList;
}(React.Component);

ReactDOM.render(React.createElement(TodoList, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Animate } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);
        <span class="hljs-keyword">this</span>.state = { <span class="hljs-attr">items</span>: [<span class="hljs-string">'hello'</span>, <span class="hljs-string">'world'</span>, <span class="hljs-string">'click'</span>, <span class="hljs-string">'me'</span>] };
    }

    handleAdd() {
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">items</span>: [
                ...this.state.items,
                <span class="hljs-comment">// eslint-disable-next-line</span>
                prompt(<span class="hljs-string">'Enter some text'</span>)
            ]
        });
    }

    handleRemove(i) {
        <span class="hljs-keyword">const</span> newItems = <span class="hljs-keyword">this</span>.state.items.slice();
        newItems.splice(i, <span class="hljs-number">1</span>);
        <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">items</span>: newItems });
    }

    render() {
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"totolist-container"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Animate</span> <span class="hljs-attr">animationAppear</span> <span class="hljs-attr">animation</span>=<span class="hljs-string">"fade"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"todo-list"</span> <span class="hljs-attr">singleMode</span>=<span class="hljs-string">{false}</span>
                    <span class="hljs-attr">beforeAppear</span>=<span class="hljs-string">{()</span> =&gt;</span> console.log('before appear')}
                    onAppear={() =&gt; console.log('appear')}
                    afterAppear={() =&gt; console.log('after appear')}
                    beforeEnter={() =&gt; console.log('before enter')}
                    onEnter={() =&gt; console.log('enter')}
                    afterEnter={() =&gt; console.log('after enter')}
                    beforeLeave={() =&gt; console.log('before leave')}
                    onLeave={() =&gt; console.log('leave')}
                    afterLeave={() =&gt; console.log('after leave')}&gt;
                    {this.state.items.map((item, i) =&gt; (
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item}</span>&gt;</span>
                            {item}
                            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> this.handleRemove(i)}&gt;
                                &amp;times;
                            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    ))}
                <span class="hljs-tag">&lt;/<span class="hljs-name">Animate</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> this.handleAdd()}&gt;Add Item<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
}

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> /&gt;</span>, mountNode);</span></code></pre></div><style type="text/css">.fade-appear {
  opacity: 0.01;
}

.fade-appear.fade-appear-active {
  opacity: 1;
  transition: opacity 1000ms ease-in;
}

.fade-enter {
  opacity: 0.01;
}

.fade-enter.fade-enter-active {
  opacity: 1;
  transition: opacity 1000ms ease-in;
}

.fade-leave {
  opacity: 1;
}

.fade-leave.fade-leave-active {
  opacity: 0.01;
  transition: opacity 800ms ease-in;
}

.totolist-container {
  padding: 20px;
  border: 1px solid #ccc;
  width: 200px;
  border-radius: 4px;
}

.todo-list > * {
  margin: 5px 0;
  padding: 5px 0;
  border-bottom:  1px solid #ccc;
}

.totolist-container > button {
  margin-top: 20px;
}</style><div class="highlight"><pre><code class="css"><span class="hljs-selector-class">.fade-appear</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.01</span>;
}

<span class="hljs-selector-class">.fade-appear</span><span class="hljs-selector-class">.fade-appear-active</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1000ms</span> ease-in;
}

<span class="hljs-selector-class">.fade-enter</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.01</span>;
}

<span class="hljs-selector-class">.fade-enter</span><span class="hljs-selector-class">.fade-enter-active</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1000ms</span> ease-in;
}

<span class="hljs-selector-class">.fade-leave</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-selector-class">.fade-leave</span><span class="hljs-selector-class">.fade-leave-active</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.01</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">800ms</span> ease-in;
}

<span class="hljs-selector-class">.totolist-container</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.todo-list</span> &gt; * {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-bottom</span>:  <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
}

<span class="hljs-selector-class">.totolist-container</span> &gt; <span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>Demo the enter and leave animation of multiple child elements.</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
    <div class="demo-list-item" id="animate-1">
      <div class="demo-list-item-header">
        <a href="#animate-1" class="title">Expand and collapse animation</a>
      </div>
      <div class="demo-list-item-body">
        <div class="demo-list-item-viewbox">
          <div id="react-app-animate-1"></div>
          <script>var mountNode = document.getElementById('react-app-animate-1');</script> <script>(function(){'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _next = require('@alife/next');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Demo = function (_React$Component) {
    _inherits(Demo, _React$Component);

    function Demo(props) {
        _classCallCheck(this, Demo);

        var _this = _possibleConstructorReturn(this, (Demo.__proto__ || Object.getPrototypeOf(Demo)).call(this, props));

        _this.state = { expand: true };
        ['beforeEnter', 'onEnter', 'afterEnter', 'beforeLeave', 'onLeave', 'afterLeave', 'handleToggle'].forEach(function (method) {
            _this[method] = _this[method].bind(_this);
        });
        return _this;
    }

    _createClass(Demo, [{
        key: 'handleToggle',
        value: function handleToggle() {
            this.setState({
                expand: !this.state.expand
            });
        }
    }, {
        key: 'beforeEnter',
        value: function beforeEnter(node) {
            this.height = node.offsetHeight;
            node.style.height = '0px';
        }
    }, {
        key: 'onEnter',
        value: function onEnter(node) {
            node.style.height = this.height + 'px';
        }
    }, {
        key: 'afterEnter',
        value: function afterEnter(node) {
            this.height = null;
            node.style.height = null;
        }
    }, {
        key: 'beforeLeave',
        value: function beforeLeave(node) {
            node.style.height = this.height + 'px';
        }
    }, {
        key: 'onLeave',
        value: function onLeave(node) {
            node.style.height = '0px';
        }
    }, {
        key: 'afterLeave',
        value: function afterLeave(node) {
            node.style.height = null;
        }
    }, {
        key: 'render',
        value: function render() {
            return React.createElement(
                'div',
                null,
                React.createElement(
                    'button',
                    { onClick: this.handleToggle },
                    'Toggle expand'
                ),
                React.createElement(
                    _next.Animate,
                    { animation: 'expand',
                        beforeEnter: this.beforeEnter,
                        onEnter: this.onEnter,
                        afterEnter: this.afterEnter,
                        beforeLeave: this.beforeLeave,
                        onLeave: this.onLeave,
                        afterLeave: this.afterLeave },
                    this.state.expand ? React.createElement('div', { className: 'notice' }) : null
                )
            );
        }
    }]);

    return Demo;
}(React.Component);

ReactDOM.render(React.createElement(Demo, null), mountNode);})()</script><div class="highlight"><pre><code class="javascript"><span class="hljs-keyword">import</span> { Animate } <span class="hljs-keyword">from</span> <span class="hljs-string">'aop-ui'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);
        <span class="hljs-keyword">this</span>.state = { <span class="hljs-attr">expand</span>: <span class="hljs-literal">true</span> };
        [<span class="hljs-string">'beforeEnter'</span>, <span class="hljs-string">'onEnter'</span>, <span class="hljs-string">'afterEnter'</span>, <span class="hljs-string">'beforeLeave'</span>, <span class="hljs-string">'onLeave'</span>, <span class="hljs-string">'afterLeave'</span>, <span class="hljs-string">'handleToggle'</span>].forEach(<span class="hljs-function"><span class="hljs-params">method</span> =&gt;</span> {
            <span class="hljs-keyword">this</span>[method] = <span class="hljs-keyword">this</span>[method].bind(<span class="hljs-keyword">this</span>);
        });
    }

    handleToggle() {
        <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">expand</span>: !<span class="hljs-keyword">this</span>.state.expand
        });
    }

    beforeEnter(node) {
        <span class="hljs-keyword">this</span>.height = node.offsetHeight;
        node.style.height = <span class="hljs-string">'0px'</span>;
    }

    onEnter(node) {
        node.style.height = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.height}</span>px`</span>;
    }

    afterEnter(node) {
        <span class="hljs-keyword">this</span>.height = <span class="hljs-literal">null</span>;
        node.style.height = <span class="hljs-literal">null</span>;
    }

    beforeLeave(node) {
        node.style.height = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.height}</span>px`</span>;
    }

    onLeave(node) {
        node.style.height = <span class="hljs-string">'0px'</span>;
    }

    afterLeave(node) {
        node.style.height = <span class="hljs-literal">null</span>;
    }

    render() {
        <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleToggle}</span>&gt;</span>Toggle expand<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Animate</span> <span class="hljs-attr">animation</span>=<span class="hljs-string">"expand"</span>
                <span class="hljs-attr">beforeEnter</span>=<span class="hljs-string">{this.beforeEnter}</span>
                <span class="hljs-attr">onEnter</span>=<span class="hljs-string">{this.onEnter}</span>
                <span class="hljs-attr">afterEnter</span>=<span class="hljs-string">{this.afterEnter}</span>
                <span class="hljs-attr">beforeLeave</span>=<span class="hljs-string">{this.beforeLeave}</span>
                <span class="hljs-attr">onLeave</span>=<span class="hljs-string">{this.onLeave}</span>
                <span class="hljs-attr">afterLeave</span>=<span class="hljs-string">{this.afterLeave}</span>&gt;</span>
                {this.state.expand ?
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"notice"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> :
                    null}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Animate</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        );
    }
}

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span>, mountNode);</span></code></pre></div><style type="text/css">.expand-enter {
    overflow: hidden;
}

.expand-enter-active {
    transition: height 0.3s ease-out;
}

.expand-leave {
    overflow: hidden;
}

.expand-leave-active {
    transition: height 0.3s ease-out;
}

.notice {
    width: 200px;
    height: 100px;
    margin-top: 20px;
    border: 1px solid #ccc;
}</style><div class="highlight"><pre><code class="css"><span class="hljs-selector-class">.expand-enter</span> {
    <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.expand-enter-active</span> {
    <span class="hljs-attribute">transition</span>: height <span class="hljs-number">0.3s</span> ease-out;
}

<span class="hljs-selector-class">.expand-leave</span> {
    <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.expand-leave-active</span> {
    <span class="hljs-attribute">transition</span>: height <span class="hljs-number">0.3s</span> ease-out;
}

<span class="hljs-selector-class">.notice</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
}</code></pre></div>
        </div>
        <div class="demo-list-item-description">
          
<p>Demo the expand and collapse animation of a child element.</p>

        </div>
        <div class="demo-list-item-control">
          <img src="https://img.alicdn.com/tfs/TB13J3EdzihSKJjy0FiXXcuiFXa-20-20.svg" alt="code collapse" class="collapse-btn">
        </div>
      </div>
    </div>
    
  </div>
  <div class="demo-api">
    <div class="title">API</div>
    <div class="demo-api-body markdown" id="demo-api"></div>
  </div>
</div>

  <script src="./statics/common.js"></script>
  <script src="./statics/demo-util.js"></script>
</body>

</html>
